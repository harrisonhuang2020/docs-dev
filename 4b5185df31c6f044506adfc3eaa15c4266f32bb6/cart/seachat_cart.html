

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>SeaChat Cart Technical Documentation &mdash; Seasalt.ai Dev Docs 0.0.1 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="SeaWord NLP Overview" href="../nlp/readme.html" />
    <link rel="prev" title="SeaChat Cart Overview" href="readme.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> Seasalt.ai Dev Docs
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Product Introductions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../product_introduction/seax.html">SeaX</a></li>
<li class="toctree-l1"><a class="reference internal" href="../product_introduction/seavoice.html">SeaVoice</a></li>
</ul>
<p class="caption"><span class="caption-text">SeaChat</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../seachat/quickstart.html">SeaChat Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../seachat/bot_tutorial.html">SeaChat Bot Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../seachat/policy.html">SeaChat Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../seachat/faq.html">SeaChat FAQ</a></li>
</ul>
<p class="caption"><span class="caption-text">SeaChat-cart</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="readme.html">SeaChat Cart</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Technical Docs</a></li>
</ul>
<p class="caption"><span class="caption-text">SeaWord</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../nlp/readme.html">SeaWord</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nlp/sum_tutorial.html">Summarization API Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nlp/topic_tutorial.html">Topic Prediction API Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nlp/action_tutorial.html">Action Extraction API Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nlp/xlingualNER_tutorial.html">Cross Lingual NER API Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nlp/mr_tutorial.html">Machine Reading API Tutorial</a></li>
</ul>
<p class="caption"><span class="caption-text">SeaVoice (Seasalt speech)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../speech/readme.html">SeaVoice README</a></li>
<li class="toctree-l1"><a class="reference internal" href="../speech/seavoice_sdk_python_tutorial.html">SeaVoice SDK (Python)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../speech/seavoice_restful_apis_tutorial.html">SeaVoice RESTful APIs</a></li>
</ul>
<p class="caption"><span class="caption-text">SeaChat-report</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../report/index.html">Welcome to SeaChat-report’s documentation!</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Seasalt.ai Dev Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>SeaChat Cart Technical Documentation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/cart/seachat_cart.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="seachat-cart-technical-documentation">
<span id="seachat-cart"></span><h1>SeaChat Cart Technical Documentation<a class="headerlink" href="#seachat-cart-technical-documentation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-ngchat_cart.cart">
<span id="ngchat-cart-cart-module"></span><h2>ngchat_cart.cart module<a class="headerlink" href="#module-ngchat_cart.cart" title="Permalink to this headline">¶</a></h2>
<p>Shared cart and menu implementation for ngChat.</p>
<dl class="simple">
<dt>Classes:</dt><dd><ul class="simple">
<li><p>Calories</p></li>
<li><p>{Menu|Cart}Modifier</p></li>
<li><p>{Menu|Cart}ModifierGroup</p></li>
<li><p>Menu</p></li>
<li><p>Cart</p></li>
<li><p>ItemSearch</p></li>
<li><p>MenuSolver</p></li>
</ul>
</dd>
<dt>Global Variables:</dt><dd><ul class="simple">
<li><p>logger (Logger): For general logging</p></li>
<li><p>item_logger (Logger): For logging items when selected by a user</p></li>
<li><p>inflection (engine): Engine for inflect package</p></li>
<li><p>MENUS (dict): A dict of store name, Menu object pairs</p></li>
<li><p>ITEM_NAME_2_REC_SCORE (dict): A dict of item name, recommendation score pairs</p></li>
<li><p>DEFAULT_CONFIG (dict): Default configuration if not supplied by cart_config.yml</p></li>
<li><p>CONFIG (dict): Configuration specified by cart_config.yml</p></li>
<li><p>DUMMY (Text): The name of the dummy modifier</p></li>
<li><p>DUMMY_MODIFIER (dict): Full specification for the dummy modifier</p></li>
</ul>
</dd>
</dl>
<dl class="py class">
<dt id="ngchat_cart.cart.Calories">
<em class="property">class </em><code class="sig-prename descclassname">ngchat_cart.cart.</code><code class="sig-name descname">Calories</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">min_max</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Tuple<span class="p">[</span>int<span class="p">, </span>int<span class="p">]</span><span class="p">]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ngchat_cart.cart.Calories" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class to store, calculate, and format calories.</p>
<dl class="py attribute">
<dt id="ngchat_cart.cart.Calories.minimum">
<code class="sig-name descname">minimum</code><a class="headerlink" href="#ngchat_cart.cart.Calories.minimum" title="Permalink to this definition">¶</a></dt>
<dd><p>minimum calories</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.Calories.maximum">
<code class="sig-name descname">maximum</code><a class="headerlink" href="#ngchat_cart.cart.Calories.maximum" title="Permalink to this definition">¶</a></dt>
<dd><p>maximum calories</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<p>Initialize a calorie object with minimum and maximum.</p>
<p>If one value is missing, set values equal
If bot values are missing, set both to 0</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>min_max</strong> (<em>Optional</em><em>[</em><em>Tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>]</em><em>]</em>) – A tuple containing
the minimum and maximum calories</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="ngchat_cart.cart.Cart">
<em class="property">class </em><code class="sig-prename descclassname">ngchat_cart.cart.</code><code class="sig-name descname">Cart</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cart_items</span><span class="p">:</span> <span class="n">List<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">ngchat_cart.cart.CartItem</a><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">active_item</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">ngchat_cart.cart.CartItem</a></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">menu</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.Menu" title="ngchat_cart.cart.Menu">ngchat_cart.cart.Menu</a><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ngchat_cart.cart.Cart" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class for organizing and manipulating the user’s cart.</p>
<p>Contains methods to add items, clear cart, add or modify options,
and list the items in the cart, the total calories, or the total price.</p>
<p><cite>Cart.candidate_items</cite> is used for keeping track of all items ever proposed for customers to select.
So even if after a few iterations of conversation, the customer goes back a few screens to select an item,
candidate_items still track which item the customer selected. Note that since we use indexes to keep track of
candidate items, one should <em>never</em> delete anything from <cite>Cart.candidate_items</cite>.</p>
<dl class="py attribute">
<dt id="ngchat_cart.cart.Cart.cart_items">
<code class="sig-name descname">cart_items</code><a class="headerlink" href="#ngchat_cart.cart.Cart.cart_items" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of CartItem objects that are in the cart</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">CartItem</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.Cart.active_item">
<code class="sig-name descname">active_item</code><a class="headerlink" href="#ngchat_cart.cart.Cart.active_item" title="Permalink to this definition">¶</a></dt>
<dd><p>currently selected item</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">CartItem</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.Cart.menu">
<code class="sig-name descname">menu</code><a class="headerlink" href="#ngchat_cart.cart.Cart.menu" title="Permalink to this definition">¶</a></dt>
<dd><p>The menu object for the current store</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#ngchat_cart.cart.Menu" title="ngchat_cart.cart.Menu">Menu</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.Cart.candidate_items">
<code class="sig-name descname">candidate_items</code><a class="headerlink" href="#ngchat_cart.cart.Cart.candidate_items" title="Permalink to this definition">¶</a></dt>
<dd><p>a list of items proposed to customer.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">CartItem</a>]</p>
</dd>
</dl>
</dd></dl>

<p>Initialize required values.</p>
<dl class="py method">
<dt id="ngchat_cart.cart.Cart.add_item">
<code class="sig-name descname">add_item</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">item</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">ngchat_cart.cart.CartItem</a></span></em>, <em class="sig-param"><span class="n">sender_id</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">''</span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">ngchat_cart.cart.CartItem</a><span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.Cart.add_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a single item to the cart.</p>
<p>Item should be a CartItem and cannot be a string-based name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>item</strong> (<a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem"><em>CartItem</em></a>) – A cart item to add</p></li>
<li><p><strong>sender_id</strong> (<em>Optional</em><em>[</em><em>Text</em><em>]</em>) – the user’s sender id, for logging purposes only</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – if item param is not a CartItem</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>CartItem if added successfully, None otherwise</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Optional[<a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">CartItem</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.Cart.add_modifier">
<code class="sig-name descname">add_modifier</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">item</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">ngchat_cart.cart.MenuItem</a><span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">ngchat_cart.cart.CartItem</a><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">modifier_name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">mod_group</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#ngchat_cart.cart.CartModifierGroup" title="ngchat_cart.cart.CartModifierGroup">ngchat_cart.cart.CartModifierGroup</a></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">ngchat_cart.cart.CartItem</a><span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.Cart.add_modifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a modifier to an existing item in the cart.</p>
<p>If the modifier already exists in item, increment <cite>modifier.quantity</cite> by 1.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>item</strong> (<em>Union</em><em>[</em><em>Text</em><em>, </em><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem"><em>MenuItem</em></a><em>, </em><a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem"><em>CartItem</em></a><em>]</em>) – The item to be modified</p></li>
<li><p><strong>modifier</strong> (<em>Text</em>) – The name of the modifier to be added to the item</p></li>
<li><p><strong>mod_group</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#ngchat_cart.cart.CartModifierGroup" title="ngchat_cart.cart.CartModifierGroup"><em>CartModifierGroup</em></a><em>]</em>) – The mod group to add the opt to,
if this is not provided, the best modifier group will be auto selected</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>modified item for success, None for failure</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Optional[<a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">CartItem</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.Cart.cart_dump">
<code class="sig-name descname">cart_dump</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Dict<span class="p">[</span>str<span class="p">, </span>Any<span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.Cart.cart_dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Compile important cart info to dict for use in dialogue policy.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl>
<dt>A dict containing cart information to aid in</dt><dd><dl>
<dt>dialogue management. Dict contains the following keys:</dt><dd><dl class="simple">
<dt>active_item (dict):</dt><dd><p>name (text)
is_satisfied (bool)
available_options (list[text])
modifier_groups (list[dict[text, any]])</p>
</dd>
</dl>
<p>cart_items (list[text])
menu (text)</p>
</dd>
</dl>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Dict[Text, Any]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.Cart.checkout">
<code class="sig-name descname">checkout</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#ngchat_cart.cart.Cart.checkout" title="Permalink to this definition">¶</a></dt>
<dd><p>Checkout all items in the cart.</p>
<p>NOT IMPLEMENTED</p>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.Cart.clear">
<code class="sig-name descname">clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#ngchat_cart.cart.Cart.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove all items in the cart and reset active_item.</p>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.Cart.get_item_names">
<code class="sig-name descname">get_item_names</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.Cart.get_item_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a list of the names of items in the cart.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A list of the names of items in the cart</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>List[Text]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.Cart.get_matching_cart_item">
<code class="sig-name descname">get_matching_cart_item</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">item</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">ngchat_cart.cart.MenuItem</a><span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">ngchat_cart.cart.CartItem</a><span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">ngchat_cart.cart.CartItem</a><span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.Cart.get_matching_cart_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Given an item, return the names of the closest match in the cart.</p>
<p>Used to verify that an item is in the cart from actions.py.
Matches based on a full detailed string of the item, including all options.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>item</strong> (<em>Union</em><em>[</em><em>Text</em><em>, </em><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem"><em>MenuItem</em></a><em>, </em><a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem"><em>CartItem</em></a><em>]</em>) – The item to be matched</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The closest item match, or None if there is no confident match</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Optional[<a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">CartItem</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.Cart.get_matching_menu">
<code class="sig-name descname">get_matching_menu</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">store_name</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.Menu" title="ngchat_cart.cart.Menu">ngchat_cart.cart.Menu</a><span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.Cart.get_matching_menu" title="Permalink to this definition">¶</a></dt>
<dd><p>Look in the menu directory and return the requested menu object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>store_name</strong> (<em>Text</em>) – The name of the store/menu</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>If matching confidence &gt; <cite>CONFIG.FUZZY_MATCH_THRESH</cite>, return the menu object. Otherwise, None</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Optional[<a class="reference internal" href="#ngchat_cart.cart.Menu" title="ngchat_cart.cart.Menu">Menu</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.Cart.get_matching_menu_item">
<code class="sig-name descname">get_matching_menu_item</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">item</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">ngchat_cart.cart.MenuItem</a><span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">ngchat_cart.cart.CartItem</a><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">keywords</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">[]</span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">ngchat_cart.cart.MenuItem</a><span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.Cart.get_matching_menu_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Given an item, return the name of the closest item on the menu.</p>
<p>Used to verify that an item is in the menu from actions.py.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>item</strong> (<em>Union</em><em>[</em><em>Text</em><em>, </em><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem"><em>MenuItem</em></a><em>, </em><a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem"><em>CartItem</em></a><em>]</em>) – The name of the item to be matched</p></li>
<li><p><strong>keyword</strong> (<em>List</em><em>[</em><em>Text</em><em>]</em>) – keywords to assist with elasticsearch query</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The name of the closest item match, or None if there is no confident match</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Optional[<a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">MenuItem</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.Cart.get_similar_menu_items">
<code class="sig-name descname">get_similar_menu_items</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">item</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">ngchat_cart.cart.MenuItem</a><span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">ngchat_cart.cart.CartItem</a><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">keywords</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">max_results</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">5</span></em>, <em class="sig-param"><span class="n">multi_match_field_weights</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Dict<span class="p">[</span>str<span class="p">, </span>int<span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.Cart.get_similar_menu_items" title="Permalink to this definition">¶</a></dt>
<dd><p>Given the name of an item, return a list of the closest item names on the menu.</p>
<p>Will return a list of item names up to max_results. Will only return results with a
confidence higher than CONFIG.FUZZY_SUGGEST_THRESHOLD.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>item</strong> (<em>Union</em><em>[</em><em>Text</em><em>, </em><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem"><em>MenuItem</em></a><em>, </em><a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem"><em>CartItem</em></a><em>]</em>) – The name of the item to find similar items to</p></li>
<li><p><strong>keywords</strong> (<em>List</em><em>[</em><em>Text</em><em>]</em>) – A list of keywords that are used in multi match</p></li>
<li><p><strong>max_results</strong> (<em>int</em>) – The number of results to return at most</p></li>
<li><p><strong>multi_match_field_weights</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>[</em><em>Text</em><em>, </em><em>int</em><em>]</em><em>]</em>) – weight for multi match fields,
e.g., “name” -&gt; 3 will issue the query as <cite>name^3</cite>, indicating <cite>name</cite> field’s weight
is 3 times of other fields weight.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of names to return, if there are any above CONFIG.FUZZY_SUGGEST_THRESH</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Optional[List[Text]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.Cart.list_contents">
<code class="sig-name descname">list_contents</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#ngchat_cart.cart.Cart.list_contents" title="Permalink to this definition">¶</a></dt>
<dd><p>Compile a readable string listing items in the cart.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Readable string of items in the cart</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Text</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.Cart.modify_modifier">
<code class="sig-name descname">modify_modifier</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">item</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">ngchat_cart.cart.MenuItem</a><span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">ngchat_cart.cart.CartItem</a><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">modifier_name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">modifier_value</span><span class="p">:</span> <span class="n">Union<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.MenuOption" title="ngchat_cart.cart.MenuOption">ngchat_cart.cart.MenuOption</a><span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.CartOption" title="ngchat_cart.cart.CartOption">ngchat_cart.cart.CartOption</a><span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">ngchat_cart.cart.CartItem</a><span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">ngchat_cart.cart.MenuItem</a><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">mod_group</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#ngchat_cart.cart.CartModifierGroup" title="ngchat_cart.cart.CartModifierGroup">ngchat_cart.cart.CartModifierGroup</a></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">quantity</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">ngchat_cart.cart.CartItem</a><span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.Cart.modify_modifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify a single item in the cart.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>item</strong> (<em>Union</em><em>[</em><em>Text</em><em>, </em><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem"><em>MenuItem</em></a><em>, </em><a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem"><em>CartItem</em></a><em>]</em>) – The item to be modified</p></li>
<li><p><strong>modifier_name</strong> (<em>Text</em>) – The name of the specific item modifier to be modified</p></li>
<li><p><strong>modifier_value</strong> (<em>{Menu|Cart}{Item|Option}</em>) – The new desired value, a menu modifier object</p></li>
<li><p><strong>mod_group</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#ngchat_cart.cart.CartModifierGroup" title="ngchat_cart.cart.CartModifierGroup"><em>CartModifierGroup</em></a><em>]</em>) – The modifier group where the modifier is located</p></li>
<li><p><strong>quantity</strong> (<em>int</em>) – a optional param that will modify the quantity of the modifier [default=None]</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – if item not found in cart</p></li>
<li><p><strong>KeyError</strong> – if modifier not found</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>cart item if successful, None if error,</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Optional[<a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">CartItem</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.Cart.modify_quantity">
<code class="sig-name descname">modify_quantity</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">item</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">ngchat_cart.cart.MenuItem</a><span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">ngchat_cart.cart.CartItem</a><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">new_quant</span><span class="p">:</span> <span class="n">int</span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">ngchat_cart.cart.CartItem</a><span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.Cart.modify_quantity" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify the quantity of a single item in the cart.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>item</strong> (<em>Union</em><em>[</em><em>Text</em><em>, </em><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem"><em>MenuItem</em></a><em>, </em><a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem"><em>CartItem</em></a><em>]</em>) – The item to be modified</p></li>
<li><p><strong>new_quant</strong> (<em>int</em>) – The new quantity desired</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – if item is not in the cart</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>modified item object for success, None for failure</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Optional[<a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">CartItem</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.Cart.query_item_modifiers">
<code class="sig-name descname">query_item_modifiers</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">item_name</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.Cart.query_item_modifiers" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve modifiers list for the item_name, or active item.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>item_name</strong> (<em>Optional</em><em>[</em><em>Text</em><em>]</em>) – The name of the item whose modifiers to list.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>If found, a string listing available modifiers, otherwise None.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Optional[Text]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.Cart.query_item_suggestions">
<code class="sig-name descname">query_item_suggestions</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">keywords</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">n</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">6</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">ngchat_cart.cart.MenuItem</a><span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.Cart.query_item_suggestions" title="Permalink to this definition">¶</a></dt>
<dd><p>Query ElasticSearch for item suggestions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>Text</em>) – String to be used to match the item name in the query.</p></li>
<li><p><strong>keywords</strong> (<em>List</em><em>[</em><em>Text</em><em>]</em>) – list of str to be used in the keywords field for ElasticSearch multimatch.
Defaults to the empty string.</p></li>
<li><p><strong>n</strong> (<em>int</em>) – number of results to return</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of item suggestions, or empty list if none are found.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">MenuItem</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.Cart.query_menu_category">
<code class="sig-name descname">query_menu_category</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">category_name</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">ngchat_cart.cart.MenuItem</a><span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.Cart.query_menu_category" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a list of items in a menu category.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>category_name</strong> (<em>Optional</em><em>[</em><em>Text</em><em>]</em>) – The name of the menu category to query or None.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of items in a matching category or an empty list.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Optional[Text]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.Cart.query_modifier_description">
<code class="sig-name descname">query_modifier_description</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">item_name</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">modifier_name</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.Cart.query_modifier_description" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve modifier description for a modifier group in item_name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>item_name</strong> (<em>Optional</em><em>[</em><em>Text</em><em>]</em>) – The name of the item whose modifiers to query or None.</p></li>
<li><p><strong>modifier_name</strong> (<em>Optional</em><em>[</em><em>Text</em><em>]</em>) – The modifier category to query or None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>If found, a modifier description, otherwise None.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Optional[Text]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.Cart.remove_item">
<code class="sig-name descname">remove_item</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">item</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">ngchat_cart.cart.MenuItem</a><span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">ngchat_cart.cart.CartItem</a><span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">ngchat_cart.cart.CartItem</a><span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.Cart.remove_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a single item from the cart.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>item</strong> (<em>Union</em><em>[</em><em>Text</em><em>, </em><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem"><em>MenuItem</em></a><em>, </em><a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem"><em>CartItem</em></a><em>]</em>) – The name of the item to be removed</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>item object if successful, None if failure</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Optional[<a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">CartItem</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.Cart.resolve_items">
<code class="sig-name descname">resolve_items</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">item_names</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span>List<span class="p">[</span>str<span class="p">]</span><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">slot2values</span><span class="p">:</span> <span class="n">Dict<span class="p">[</span>str<span class="p">, </span>Union<span class="p">[</span>str<span class="p">, </span>List<span class="p">[</span>str<span class="p">]</span><span class="p">]</span><span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>Tuple<span class="p">[</span>Dict<span class="p">[</span>str<span class="p">, </span>List<span class="p">[</span>str<span class="p">]</span><span class="p">]</span><span class="p">, </span>Dict<span class="p">[</span>str<span class="p">, </span>List<span class="p">[</span>str<span class="p">]</span><span class="p">]</span><span class="p">, </span>List<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">ngchat_cart.cart.CartItem</a><span class="p">]</span><span class="p">, </span>List<span class="p">[</span>str<span class="p">]</span><span class="p">]</span><span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.Cart.resolve_items" title="Permalink to this definition">¶</a></dt>
<dd><p>Find matching items given item names and slot values.</p>
<p>This function uses the MenuSolver to match the best items given a list of <cite>item_names</cite> and corresponding
<cite>slot2values</cite>.</p>
<p>Sample input:
* item_names: [‘chicken sandwich’]
* slot2values: {‘dipping_sauces’: [‘honey bbq sauce’],</p>
<blockquote>
<div><p>‘beverages’: ‘pepsi’,
‘options’: [‘extra crispy’],
‘sides’: ‘fries’}</p>
</div></blockquote>
<p>Output: a list of complicated tuples of matched_item2options, not_matched_options, matched_items, similar_items</p>
<p>matched_item2options: e.g., {‘Crispy Colonel Box’: [‘sandwich’, ‘pepsi’, ‘fries’, ‘extra crispy]}
not_matched_options: e.g., {‘dipping_sauces’: [‘honey bbq sauce’]}
matched_items: a list of matched CartItem with <em>options</em> added, e.g., CartItem(‘Crispy Colonel Box’) in this case
similar_items: a list of ElasticSearch item names</p>
<p>If matched_items is an empty list, then one can use the results from similar_items to give suggestions.
This saves one more call of ElasticSearch query.</p>
<p>How it works with your Menu.json file:
This function relies heavily on the <cite>aliases</cite> and <cite>tags</cite> field of menu items because:
1. These fields can be handcrafted as we discover more corner cases.
2. These fields can be coordinated with NLU entities/slots.</p>
<p>Best Practice:
1. an option/item_name can be matched to an item’s name, aliases. e.g.: “number 3” on the menu is</p>
<blockquote>
<div><p>“3 pc. Chicken Combo”, then include “number 3” as an alias in your menu:</p>
<blockquote>
<div><p>“name”: “3 pc. Chicken Combo”,
“aliases”: [</p>
<blockquote>
<div><p>“number 3”,
“number three”,
“3 piece Chicken Combo”,
“three piece Chicken Combo”,
“three pc. Chicken Combo”</p>
</div></blockquote>
<p>],</p>
</div></blockquote>
</div></blockquote>
<ol class="arabic" start="2">
<li><p>an option/item_name can be matched to an item’s tags, e.g.: a “Crispy Colonel Box” contains
“fries” and a “sandwich”, and it’s also a type of “big box meal”:</p>
<blockquote>
<div><blockquote>
<div><p>“name”: “Crispy Colonel Box”,
“tags”: [</p>
<blockquote>
<div><p>“big box meal”,
“big box meals”,
“fries”,
“sandwich”,
“sandwiches”</p>
</div></blockquote>
<p>],</p>
</div></blockquote>
<p>Then slot2values is matched against these tags.</p>
</div></blockquote>
</li>
<li><p>during bot development, if a slot/entity fails to match an item, then the developer should go to
Menu.json to add corresponding <cite>aliases</cite> and <cite>tags</cite> fields.</p></li>
</ol>
<p>Limitations:</p>
<ol class="arabic simple">
<li><p>It only gives <em>one</em> best solution, but not all best solutions. For instance, if we just want to match
“sides”: “side”, it’ll pick any item with “side” tag on it.</p></li>
</ol>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>item_names</strong> (<em>Union</em><em>[</em><em>Text</em><em>, </em><em>List</em><em>[</em><em>Text</em><em>]</em><em>]</em>) – a single item name or a list of names</p></li>
<li><p><strong>slot2values</strong> (<em>Dict</em><em>[</em><em>Text</em><em>, </em><em>Union</em><em>[</em><em>Text</em><em>, </em><em>List</em><em>[</em><em>Text</em><em>]</em><em>]</em><em>]</em>) – [description]</p></li>
<li><p><strong>default_item_key</strong> (<em>#</em>) – name for your item slot, default to ‘item’</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – <cite>item_names</cite> and <cite>slot2values</cite> should strictly follow their types.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>a tuple for</dt><dd><p>list of matched_item2options, not_matched_options, matched_items, similar_items</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>List[Tuple[Dict[Text, List[Text]], Dict[Text, List[Text]], List[<a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">CartItem</a>], List[Text]]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.Cart.sum_calories">
<code class="sig-name descname">sum_calories</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#ngchat_cart.cart.Calories" title="ngchat_cart.cart.Calories">ngchat_cart.cart.Calories</a><a class="headerlink" href="#ngchat_cart.cart.Cart.sum_calories" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the total number of calories for all the items in the cart.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The total number of calories in the cart as a Calories object</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#ngchat_cart.cart.Calories" title="ngchat_cart.cart.Calories">Calories</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.Cart.sum_price">
<code class="sig-name descname">sum_price</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; float<a class="headerlink" href="#ngchat_cart.cart.Cart.sum_price" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the total cost for all the items in the cart.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The total cost for all the items in the cart</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="ngchat_cart.cart.CartItem">
<em class="property">class </em><code class="sig-prename descclassname">ngchat_cart.cart.</code><code class="sig-name descname">CartItem</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">menu_item</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">ngchat_cart.cart.MenuItem</a></span></em>, <em class="sig-param"><span class="n">quantity</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>int<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ngchat_cart.cart.CartItem" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Particular instance of an item that will interact w/ the cart.</p>
<p>These objects are stored in cart.cart_items. Each objects contains a
reference to its corresponding MenuItem object. The CartItem object
contains CartModifierGroup objects, which are filled on initialization
with only default modifiers. The CartItem can be further modified by the
user by manipulating these groups.</p>
<dl class="py attribute">
<dt id="ngchat_cart.cart.CartItem.menu_item">
<code class="sig-name descname">menu_item</code><a class="headerlink" href="#ngchat_cart.cart.CartItem.menu_item" title="Permalink to this definition">¶</a></dt>
<dd><p>A MenuItem object which contains all the basic information of the item</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">MenuItem</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.CartItem.quantity">
<code class="sig-name descname">quantity</code><a class="headerlink" href="#ngchat_cart.cart.CartItem.quantity" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of this exact item desired(default=1)</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.CartItem.modifier_groups_added">
<code class="sig-name descname">modifier_groups_added</code><a class="headerlink" href="#ngchat_cart.cart.CartItem.modifier_groups_added" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of modifier group objects with only default
modifiers, or modifiers added by the user</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="#ngchat_cart.cart.CartModifierGroup" title="ngchat_cart.cart.CartModifierGroup">CartModifierGroup</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.CartItem.default">
<code class="sig-name descname">default</code><a class="headerlink" href="#ngchat_cart.cart.CartItem.default" title="Permalink to this definition">¶</a></dt>
<dd><p>only used if CartItem is part of a combo; whether it is a default modifier or not</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<p>Initialize CartItem object with menu item and modifiers.</p>
<dl class="py method">
<dt id="ngchat_cart.cart.CartItem.add_options">
<code class="sig-name descname">add_options</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">options</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span>List<span class="p">[</span>str<span class="p">]</span><span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>bool<span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.CartItem.add_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a list of options by name to this CartItem</p>
<p>This method was developed in parallel with add_option. Currently
the KFC bot is the only bot using this method while Starbucks &amp; Tacobell
use add_option. TODO: consolodate these methods.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>options</strong> (<em>Union</em><em>[</em><em>Text</em><em>, </em><em>List</em><em>[</em><em>Text</em><em>]</em><em>]</em>) – a single or list of option names</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of True/False indicators showing whether the option is added</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[bool]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.CartItem.calories">
<em class="property">property </em><code class="sig-name descname">calories</code><a class="headerlink" href="#ngchat_cart.cart.CartItem.calories" title="Permalink to this definition">¶</a></dt>
<dd><p>Shortcut to access self.menu_item.calories.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A calorie object from the menu_item</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#ngchat_cart.cart.Calories" title="ngchat_cart.cart.Calories">Calories</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.CartItem.describe_modifier_group">
<code class="sig-name descname">describe_modifier_group</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">group_name</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.CartItem.describe_modifier_group" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a string that describes all the options for a modifier group.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>group_name</strong> (<em>Text</em>) – The name of the modifier group</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A string listing the possible options for a modifier group</dt><dd><p>or None if no matching modifier group is found.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Optional[Text]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.CartItem.from_item_name">
<em class="property">classmethod </em><code class="sig-name descname">from_item_name</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">menu</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#ngchat_cart.cart.Menu" title="ngchat_cart.cart.Menu">ngchat_cart.cart.Menu</a></span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">ngchat_cart.cart.CartItem</a><span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.CartItem.from_item_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a CartItem object by looking up a name from the menu.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>Text</em>) – The name of the item to look up in the menu</p></li>
<li><p><strong>menu</strong> (<a class="reference internal" href="#ngchat_cart.cart.Menu" title="ngchat_cart.cart.Menu"><em>Menu</em></a>) – The menu, passed in from the cart</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Returns a class object if successful,</dt><dd><p>or None if the item is not found in the menu</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Optional[<a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">CartItem</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.CartItem.get_added_modifiers">
<code class="sig-name descname">get_added_modifiers</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">include_defaults</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>Union<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.CartOption" title="ngchat_cart.cart.CartOption">ngchat_cart.cart.CartOption</a><span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">ngchat_cart.cart.CartItem</a><span class="p">]</span><span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.CartItem.get_added_modifiers" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of all added modifiers from self.modifier_groups_added.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>include_defaults</strong> (<em>bool</em>) – whether or not to include default modifier names</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of modifier objects that have been added to the CartItem</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[Union[<a class="reference internal" href="#ngchat_cart.cart.CartOption" title="ngchat_cart.cart.CartOption">CartOption</a>, <a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">CartItem</a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.CartItem.get_available_modifiers">
<code class="sig-name descname">get_available_modifiers</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">consider_groups</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>Union<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.CartOption" title="ngchat_cart.cart.CartOption">ngchat_cart.cart.CartOption</a><span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">ngchat_cart.cart.MenuItem</a><span class="p">]</span><span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.CartItem.get_available_modifiers" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all available modifiers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>consider_groups</strong> (<em>bool</em>) – whether or not to include modifiers from modifier groups that
are already full.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A list of possible modifiers, not including modifiers</dt><dd><p>that have already been added.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[Union[<a class="reference internal" href="#ngchat_cart.cart.CartOption" title="ngchat_cart.cart.CartOption">CartOption</a>, <a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">MenuItem</a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.CartItem.get_best_available_modifier_group">
<code class="sig-name descname">get_best_available_modifier_group</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">modifier_name</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.CartModifierGroup" title="ngchat_cart.cart.CartModifierGroup">ngchat_cart.cart.CartModifierGroup</a><span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.CartItem.get_best_available_modifier_group" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a modifier name, return the best modifier group to add that modifier to.</p>
<p>Used when adding an option to an item. Will first check for any valid non-full groups
and will prefer groups where the modifier_name is not already added. If all valid
groups are full, it will return the first possible group.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>modifier_name</strong> (<em>Text</em>) – The name of a modifier to add</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>The best available modifier group from self.modifier_groups_added</dt><dd><p>to add this modifier to</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#ngchat_cart.cart.CartModifierGroup" title="ngchat_cart.cart.CartModifierGroup">CartModifierGroup</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.CartItem.get_matching_modifier_group">
<code class="sig-name descname">get_matching_modifier_group</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">type_name</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.MenuModifierGroup" title="ngchat_cart.cart.MenuModifierGroup">ngchat_cart.cart.MenuModifierGroup</a><span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.CartItem.get_matching_modifier_group" title="Permalink to this definition">¶</a></dt>
<dd><p>Given the name of a modifier type, return the name of a matching modifier group.</p>
<p>Used to verify that a modifier group is available for a certain item from actions.py.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>type_name</strong> (<em>Text</em>) – The name of the modifier type to be matched</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>The name of the closest matching menu modifier group,</dt><dd><p>or None if there is no confident match</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Optional[Text]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.CartItem.get_modifier_names">
<code class="sig-name descname">get_modifier_names</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">consider_groups</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.CartItem.get_modifier_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all available modifier names for this item.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>consider_groups</strong> (<em>bool</em>) – whether or not to include names from groups that
are already full.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A list of possible modifier names, not including modifiers that</dt><dd><p>have already been added.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[Text]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.CartItem.get_modifier_names_by_mod_group_name">
<code class="sig-name descname">get_modifier_names_by_mod_group_name</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">group_name</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.CartItem.get_modifier_names_by_mod_group_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a modifier group name, return the names of all options it contains.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>group_name</strong> (<em>Text</em>) – The name of the modifier group to be matched</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The values of the closest modifier group match, or [] if there is no confident match</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[Text]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.CartItem.is_satisfied">
<code class="sig-name descname">is_satisfied</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#ngchat_cart.cart.CartItem.is_satisfied" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the item’s modifier groups are all satisfied.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Whether the item’s modifier groups are all satisfied.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.CartItem.name">
<em class="property">property </em><code class="sig-name descname">name</code><a class="headerlink" href="#ngchat_cart.cart.CartItem.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Shortcut to access self.menu_item.name.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>menu item’s name</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Text</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.CartItem.sum_calories">
<code class="sig-name descname">sum_calories</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#ngchat_cart.cart.Calories" title="ngchat_cart.cart.Calories">ngchat_cart.cart.Calories</a><a class="headerlink" href="#ngchat_cart.cart.CartItem.sum_calories" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the total calories of the item, including add-ons.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Total calories of the item as a range</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#ngchat_cart.cart.Calories" title="ngchat_cart.cart.Calories">Calories</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.CartItem.sum_price">
<code class="sig-name descname">sum_price</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; float<a class="headerlink" href="#ngchat_cart.cart.CartItem.sum_price" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the cost of the item with its various options.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The total price of the item as a float</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.CartItem.to_text">
<code class="sig-name descname">to_text</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">consider_cart_item</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#ngchat_cart.cart.CartItem.to_text" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a CartItem object to a readable string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>consider_cart_item</strong> (<em>bool</em>) – also display cart items as options. Default to False
This is only relevant for combo or virtual items, where CartItems can appear
in the modifier group.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A readable string describing the item</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Text</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.CartItem.unmet_requirements">
<code class="sig-name descname">unmet_requirements</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.CartModifierGroup" title="ngchat_cart.cart.CartModifierGroup">ngchat_cart.cart.CartModifierGroup</a><span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.CartItem.unmet_requirements" title="Permalink to this definition">¶</a></dt>
<dd><p>Check an item for unmet modifier requirements.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A list of the names of unsatisfied modifier groups</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>List[Text]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="ngchat_cart.cart.CartModifierGroup">
<em class="property">class </em><code class="sig-prename descclassname">ngchat_cart.cart.</code><code class="sig-name descname">CartModifierGroup</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">menu_modifier_group</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#ngchat_cart.cart.MenuModifierGroup" title="ngchat_cart.cart.MenuModifierGroup">ngchat_cart.cart.MenuModifierGroup</a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ngchat_cart.cart.CartModifierGroup" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ngchat_cart.cart.MenuModifierGroup" title="ngchat_cart.cart.MenuModifierGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">ngchat_cart.cart.MenuModifierGroup</span></code></a></p>
<p>A class for ModifierGroups that represent modifiers added to a CartItem.</p>
<p>Subclass of MenuModifierGroup. CartModifierGroup is tied to a CartItem
and represents all the modifiers that have been added to that item.
CartModifierGroup.modifiers can contain CartOption or CartItem objects.</p>
<p>Note: Logic for query_users_for_modifier &amp; minimum.
cart.py will count a requirement as unmet if:
1. <cite>query_users_for_modifier == True</cite> regardless of the value of <cite>minimum</cite>, or,
2. <cite>query_users_for_modifier == None</cite> and <cite>minimum &gt; 0</cite>.</p>
<p>When <cite>query_users_for_modifier == False</cite> and <cite>minimum &gt; 0</cite>, it seems contradictory. Usually this
is the case that in <cite>modifiers</cite> some items have <cite>default == True</cite> so we do not query users.</p>
<dl class="py attribute">
<dt id="ngchat_cart.cart.CartModifierGroup.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#ngchat_cart.cart.CartModifierGroup.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the modifier group</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Text</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.CartModifierGroup.menu_modifier_group">
<code class="sig-name descname">menu_modifier_group</code><a class="headerlink" href="#ngchat_cart.cart.CartModifierGroup.menu_modifier_group" title="Permalink to this definition">¶</a></dt>
<dd><p>A reference to the super menu mod group object</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#ngchat_cart.cart.MenuModifierGroup" title="ngchat_cart.cart.MenuModifierGroup">MenuModifierGroup</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.CartModifierGroup.category">
<code class="sig-name descname">category</code><a class="headerlink" href="#ngchat_cart.cart.CartModifierGroup.category" title="Permalink to this definition">¶</a></dt>
<dd><p>The category of the modifier group</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Text</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.CartModifierGroup.query_users_for_modifier">
<code class="sig-name descname">query_users_for_modifier</code><a class="headerlink" href="#ngchat_cart.cart.CartModifierGroup.query_users_for_modifier" title="Permalink to this definition">¶</a></dt>
<dd><p>whether to ask the user about the group</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt>
<code class="sig-name descname">minimum/maximum</code></dt>
<dd><p>The min/max number of selected modifiers required</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.CartModifierGroup.modifiers">
<code class="sig-name descname">modifiers</code><a class="headerlink" href="#ngchat_cart.cart.CartModifierGroup.modifiers" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of selected and/or default modifier objects</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>List[Union[<a class="reference internal" href="#ngchat_cart.cart.CartOption" title="ngchat_cart.cart.CartOption">CartOption</a>, <a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">CartItem</a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="id0">
<code class="sig-name descname">menu_modifier_group</code><a class="headerlink" href="#id0" title="Permalink to this definition">¶</a></dt>
<dd><p>A reference to the immutable MenuModifierGroup parent object</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#ngchat_cart.cart.MenuModifierGroup" title="ngchat_cart.cart.MenuModifierGroup">MenuModifierGroup</a></p>
</dd>
</dl>
</dd></dl>

<p>Create a CartModifierGroup object.</p>
<dl class="py method">
<dt id="ngchat_cart.cart.CartModifierGroup.add_modifier">
<code class="sig-name descname">add_modifier</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">to_add</span><span class="p">:</span> <span class="n">Union<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.MenuOption" title="ngchat_cart.cart.MenuOption">MenuOption</a><span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">MenuItem</a><span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>Union<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.CartOption" title="ngchat_cart.cart.CartOption">ngchat_cart.cart.CartOption</a><span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">ngchat_cart.cart.CartItem</a><span class="p">]</span><span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.CartModifierGroup.add_modifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a modifier to the modifier group.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>to_add</strong> (<em>Text</em>) – A validated name of a modifier that appears in this group</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The successfully added modifier, or None</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Optional[Union[<a class="reference internal" href="#ngchat_cart.cart.CartOption" title="ngchat_cart.cart.CartOption">CartOption</a>, <a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">CartItem</a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.CartModifierGroup.initialize_default_modifiers">
<code class="sig-name descname">initialize_default_modifiers</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">modifiers</span><span class="p">:</span> <span class="n">List<span class="p">[</span>Union<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.MenuOption" title="ngchat_cart.cart.MenuOption">MenuOption</a><span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">MenuItem</a><span class="p">]</span><span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>Union<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">ngchat_cart.cart.CartItem</a><span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.CartOption" title="ngchat_cart.cart.CartOption">ngchat_cart.cart.CartOption</a><span class="p">]</span><span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.CartModifierGroup.initialize_default_modifiers" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize default modifiers for this CartModifierGroup object.</p>
<p>Given the modifiers from the MenuModifierGroups object, keep only the default modifiers
and convert them to CartOption/CartItem objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>modifiers</strong> (<em>List</em><em>[</em><em>Union</em><em>[</em><em>Menuitem</em><em>, </em><a class="reference internal" href="#ngchat_cart.cart.MenuOption" title="ngchat_cart.cart.MenuOption"><em>MenuOption</em></a><em>]</em><em>]</em>) – A list of modifiers from a MenuModifierGroup object</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The list of modifiers, converted to Cart{Item/Option} objects</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[Union[<a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">CartItem</a>, <a class="reference internal" href="#ngchat_cart.cart.CartOption" title="ngchat_cart.cart.CartOption">CartOption</a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.CartModifierGroup.is_full">
<code class="sig-name descname">is_full</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#ngchat_cart.cart.CartModifierGroup.is_full" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the modifier group has more room to add modifiers, or is full</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if the mod group is full, false if more modifiers can be added</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.CartModifierGroup.is_satisfied">
<code class="sig-name descname">is_satisfied</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#ngchat_cart.cart.CartModifierGroup.is_satisfied" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the modifier group requirements are satisfied</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if requirements are satisfied, else return False</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="ngchat_cart.cart.CartOption">
<em class="property">class </em><code class="sig-prename descclassname">ngchat_cart.cart.</code><code class="sig-name descname">CartOption</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">menu_option</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#ngchat_cart.cart.MenuOption" title="ngchat_cart.cart.MenuOption">ngchat_cart.cart.MenuOption</a></span></em>, <em class="sig-param"><span class="n">quantity</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>int<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ngchat_cart.cart.CartOption" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ngchat_cart.cart.MenuOption" title="ngchat_cart.cart.MenuOption"><code class="xref py py-class docutils literal notranslate"><span class="pre">ngchat_cart.cart.MenuOption</span></code></a></p>
<p>A class for options that are added to a cart item.</p>
<p>Subclass of MenuOption. A version of a MenuOption that is added to a CartItem
and is mutable.</p>
<dl class="py attribute">
<dt id="ngchat_cart.cart.CartOption.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#ngchat_cart.cart.CartOption.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the options (ex/ whipped cream)</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Text</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.CartOption.aliases">
<code class="sig-name descname">aliases</code><a class="headerlink" href="#ngchat_cart.cart.CartOption.aliases" title="Permalink to this definition">¶</a></dt>
<dd><p>a list of name aliases to assist with option matching</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>List[Text]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.CartOption.id">
<code class="sig-name descname">id</code><a class="headerlink" href="#ngchat_cart.cart.CartOption.id" title="Permalink to this definition">¶</a></dt>
<dd><p>The unique id for the modifier</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Text</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.CartOption.recommendation_score">
<code class="sig-name descname">recommendation_score</code><a class="headerlink" href="#ngchat_cart.cart.CartOption.recommendation_score" title="Permalink to this definition">¶</a></dt>
<dd><p>a score for reranking during recommendations</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.CartOption.countable">
<code class="sig-name descname">countable</code><a class="headerlink" href="#ngchat_cart.cart.CartOption.countable" title="Permalink to this definition">¶</a></dt>
<dd><p>whether the object is countable or not</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.CartOption.quantity">
<code class="sig-name descname">quantity</code><a class="headerlink" href="#ngchat_cart.cart.CartOption.quantity" title="Permalink to this definition">¶</a></dt>
<dd><p>A quantity for the item</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.CartOption.unit_of_measure">
<code class="sig-name descname">unit_of_measure</code><a class="headerlink" href="#ngchat_cart.cart.CartOption.unit_of_measure" title="Permalink to this definition">¶</a></dt>
<dd><p>Unit of measure (shots, pumps, etc)</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[Text]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.CartOption.price">
<code class="sig-name descname">price</code><a class="headerlink" href="#ngchat_cart.cart.CartOption.price" title="Permalink to this definition">¶</a></dt>
<dd><p>Price increase caused by adding this option to the item, None if unknown</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.CartOption.calories">
<code class="sig-name descname">calories</code><a class="headerlink" href="#ngchat_cart.cart.CartOption.calories" title="Permalink to this definition">¶</a></dt>
<dd><p>Calories object containing number of calories this option adds to the item</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#ngchat_cart.cart.Calories" title="ngchat_cart.cart.Calories">Calories</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.CartOption.description">
<code class="sig-name descname">description</code><a class="headerlink" href="#ngchat_cart.cart.CartOption.description" title="Permalink to this definition">¶</a></dt>
<dd><p>description, if there is one</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[Text]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.CartOption.image">
<code class="sig-name descname">image</code><a class="headerlink" href="#ngchat_cart.cart.CartOption.image" title="Permalink to this definition">¶</a></dt>
<dd><p>url to image if there is one</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[Text]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.CartOption.variants">
<code class="sig-name descname">variants</code><a class="headerlink" href="#ngchat_cart.cart.CartOption.variants" title="Permalink to this definition">¶</a></dt>
<dd><p>associated variants</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>List[Union[<a class="reference internal" href="#ngchat_cart.cart.MenuOption" title="ngchat_cart.cart.MenuOption">MenuOption</a>, <a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">MenuItem</a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.CartOption.variant_parent">
<code class="sig-name descname">variant_parent</code><a class="headerlink" href="#ngchat_cart.cart.CartOption.variant_parent" title="Permalink to this definition">¶</a></dt>
<dd><p>if this is a variant, the parent of this variant.
Otherwise, None.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[<a class="reference internal" href="#ngchat_cart.cart.MenuOption" title="ngchat_cart.cart.MenuOption">MenuOption</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.CartOption.default">
<code class="sig-name descname">default</code><a class="headerlink" href="#ngchat_cart.cart.CartOption.default" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether or not the option is added to an item by default</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.CartOption.menu">
<code class="sig-name descname">menu</code><a class="headerlink" href="#ngchat_cart.cart.CartOption.menu" title="Permalink to this definition">¶</a></dt>
<dd><p>a reference to the menu this option belongs to</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#ngchat_cart.cart.Menu" title="ngchat_cart.cart.Menu">Menu</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.CartOption.negative">
<code class="sig-name descname">negative</code><a class="headerlink" href="#ngchat_cart.cart.CartOption.negative" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether the option is negative, e.g. “No Onions”.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<p>Create a CartOption object.</p>
<dl class="py method">
<dt id="ngchat_cart.cart.CartOption.sum_price">
<code class="sig-name descname">sum_price</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; float<a class="headerlink" href="#ngchat_cart.cart.CartOption.sum_price" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the total price of the CartOption.</p>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.CartOption.to_text">
<code class="sig-name descname">to_text</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#ngchat_cart.cart.CartOption.to_text" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a string representation of the object.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="ngchat_cart.cart.ESResult">
<em class="property">class </em><code class="sig-prename descclassname">ngchat_cart.cart.</code><code class="sig-name descname">ESResult</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">es_tuple</span><span class="p">:</span> <span class="n">Tuple<span class="p">[</span>str<span class="p">, </span>Union<span class="p">[</span>float<span class="p">, </span>int<span class="p">]</span><span class="p">, </span>Dict<span class="p">[</span>str<span class="p">, </span>Any<span class="p">]</span><span class="p">]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ngchat_cart.cart.ESResult" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class for results of ES search.</p>
<p>This gives us readable attributes for name and rank results,
as well as implementing ordering methods to make sorting cleaner.
Note that the &#64;functools.total_ordering class decorator infers all
ordering operations from the defined __lt__ and __eq__ methods.</p>
<p>The constructor takes a tuple of 3 elements: (name, rank, source),
which comes from a returned ES result <cite>r</cite>:
(r[‘_source’][‘name’], r[‘_score’], r[‘_source’]). r[‘_source’] is
stored as <cite>ESResult.source</cite> in case more details are needed from the
original retrieval, which is what was injected to the ES index.</p>
<dl class="py attribute">
<dt id="ngchat_cart.cart.ESResult.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#ngchat_cart.cart.ESResult.name" title="Permalink to this definition">¶</a></dt>
<dd><p>the name of the result (product name)</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Text</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.ESResult.rank">
<code class="sig-name descname">rank</code><a class="headerlink" href="#ngchat_cart.cart.ESResult.rank" title="Permalink to this definition">¶</a></dt>
<dd><p>The score from ES</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Union[float, int]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.ESResult.source">
<code class="sig-name descname">source</code><a class="headerlink" href="#ngchat_cart.cart.ESResult.source" title="Permalink to this definition">¶</a></dt>
<dd><p>The full result from ES</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Dict[Text, Any]</p>
</dd>
</dl>
</dd></dl>

<p>Initialize from an ES result tuple.</p>
</dd></dl>

<dl class="py class">
<dt id="ngchat_cart.cart.ItemSearch">
<em class="property">class </em><code class="sig-prename descclassname">ngchat_cart.cart.</code><code class="sig-name descname">ItemSearch</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">menu_data</span><span class="p">:</span> <span class="n"><a class="reference internal" href="#ngchat_cart.cart.Menu" title="ngchat_cart.cart.Menu">ngchat_cart.cart.Menu</a></span></em>, <em class="sig-param"><span class="n">search_fields</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ngchat_cart.cart.ItemSearch" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Support for querying the menu and returning the most similar items.</p>
<p>Currently ItemSearch class uses ElasticSearch’s ‘standard analyzer’ to
preprocess text fields. According to ES, this analyzer ‘works well for
most languages’.</p>
<dl class="py attribute">
<dt id="ngchat_cart.cart.ItemSearch.es_client">
<code class="sig-name descname">es_client</code><a class="headerlink" href="#ngchat_cart.cart.ItemSearch.es_client" title="Permalink to this definition">¶</a></dt>
<dd><p>elastic search client</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Elasticsearch</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.ItemSearch.menu_data">
<code class="sig-name descname">menu_data</code><a class="headerlink" href="#ngchat_cart.cart.ItemSearch.menu_data" title="Permalink to this definition">¶</a></dt>
<dd><p>A Menu object to create an index from</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#ngchat_cart.cart.Menu" title="ngchat_cart.cart.Menu">Menu</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.ItemSearch.index_name">
<code class="sig-name descname">index_name</code><a class="headerlink" href="#ngchat_cart.cart.ItemSearch.index_name" title="Permalink to this definition">¶</a></dt>
<dd><p>index name for this menu data</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Text</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.ItemSearch.generic_search_body">
<code class="sig-name descname">generic_search_body</code><a class="headerlink" href="#ngchat_cart.cart.ItemSearch.generic_search_body" title="Permalink to this definition">¶</a></dt>
<dd><p>Search body template for general item matching</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Dict[Text, Any]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.ItemSearch.type_search_body">
<code class="sig-name descname">type_search_body</code><a class="headerlink" href="#ngchat_cart.cart.ItemSearch.type_search_body" title="Permalink to this definition">¶</a></dt>
<dd><p>Search body when mandatory typing needs to be enforced,
such as differentiating between item and modifier products</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Dict[Text, Any]</p>
</dd>
</dl>
</dd></dl>

<p>Initialize ElasticSelector, establish connection to ES service.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>menu_data</strong> (<a class="reference internal" href="#ngchat_cart.cart.Menu" title="ngchat_cart.cart.Menu"><em>Menu</em></a>) – The menu data that will be stored in ES</p></li>
<li><p><strong>search_fields</strong> (<em>List</em><em>[</em><em>Text</em><em>]</em>) – a list of fields to search when doing multi_match queries.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="ngchat_cart.cart.ItemSearch.generate_docs">
<code class="sig-name descname">generate_docs</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Iterator<span class="p">[</span>Dict<span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.ItemSearch.generate_docs" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate doc entries to be injected into ES.</p>
<p>Currently injects both menu items and menu options.
Fields include: name, type, modifier names, categories, tags,</p>
<blockquote>
<div><p>price, calories min/max, ingredients,
description, and aliases.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Yields</dt>
<dd class="field-odd"><p><em>Iterator[Dict]</em> – A dict with product details in ES format</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.ItemSearch.inject_index">
<code class="sig-name descname">inject_index</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#ngchat_cart.cart.ItemSearch.inject_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Inject menu data into an index.</p>
<p>Create a new ElasticSearch index for this store’s menu.
Loop through each item in the menu and generate a new entry for it.</p>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.ItemSearch.rerank">
<code class="sig-name descname">rerank</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">retrieved_items</span><span class="p">:</span> <span class="n">List<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.ESResult" title="ngchat_cart.cart.ESResult">ngchat_cart.cart.ESResult</a><span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.ItemSearch.rerank" title="Permalink to this definition">¶</a></dt>
<dd><p>Rerank the retrieved items based on popularity.</p>
<p>For now, just a simple rerank based on popularity score in ITEM_NAME_2_REC_SCORE.
These scores are based on the number of Bing search results for each item name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>retrieved_items</strong> (<em>List</em><em>[</em><a class="reference internal" href="#ngchat_cart.cart.ESResult" title="ngchat_cart.cart.ESResult"><em>ESResult</em></a><em>]</em>) – A list of ESResult objects w/ item name and rank</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A list of item name suggestions, reranked by popularity then</dt><dd><p>alphabetically to ensure deterministic behavior in case of a tie.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[Text]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.ItemSearch.retrieve_items">
<code class="sig-name descname">retrieve_items</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">item_name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">keywords</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">n</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">product_type</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>List<span class="p">[</span>str<span class="p">]</span><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">multi_match_field_weights</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Dict<span class="p">[</span>str<span class="p">, </span>int<span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.ESResult" title="ngchat_cart.cart.ESResult">ngchat_cart.cart.ESResult</a><span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.ItemSearch.retrieve_items" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve top n most relevant items based on keywords.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>item</strong> (<em>Union</em><em>[</em><em>Text</em><em>, </em><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem"><em>MenuItem</em></a><em>, </em><a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem"><em>CartItem</em></a><em>]</em>) – The name of the item to find similar items to</p></li>
<li><p><strong>keywords</strong> (<em>List</em><em>[</em><em>Text</em><em>]</em>) – A list of keywords that are used in multi match</p></li>
<li><p><strong>n</strong> (<em>int</em>) – The number of results to return at most</p></li>
<li><p><strong>product_type</strong> (<em>Optional</em><em>[</em><em>List</em><em>[</em><em>Text</em><em>]</em><em>]</em>) – to filter by a certain product type</p></li>
<li><p><strong>multi_match_field_weights</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>[</em><em>Text</em><em>, </em><em>int</em><em>]</em><em>]</em>) – weight for multi match fields,
e.g., “name” -&gt; 3 will issue the query as <cite>name^3</cite>, indicating <cite>name</cite> field’s weight
is 3 times of other fields weight.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a list of result from Elastic Search</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="#ngchat_cart.cart.ESResult" title="ngchat_cart.cart.ESResult">ESResult</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.ItemSearch.search">
<code class="sig-name descname">search</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">item_name</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">''</span></em>, <em class="sig-param"><span class="n">keywords</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">n</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">5</span></em>, <em class="sig-param"><span class="n">product_type</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>List<span class="p">[</span>str<span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">['item', 'virtual', 'combo']</span></em>, <em class="sig-param"><span class="n">rerank</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">multi_match_field_weights</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Dict<span class="p">[</span>str<span class="p">, </span>int<span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">return_only_one_if_strict_match</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.ItemSearch.search" title="Permalink to this definition">¶</a></dt>
<dd><p>Search for an item on the menu given the entities from the user’s request.</p>
<p>If <cite>item_name</cite> strictly matches the returned result’s name or aliases, return one result
regardless of n’s value and confidence threshold.
If there is a highly confident match, return one result.
If there is no exact result, return n similar results if they are within</p>
<blockquote>
<div><p>the suggestion threshold</p>
</div></blockquote>
<p>If rerank is True, rerank similar results by popularity.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>item_name</strong> (<em>Text</em>) – The item entity from the user’s utterance</p></li>
<li><p><strong>keywords</strong> (<em>List</em><em>[</em><em>Text</em><em>]</em>) – A list of other entities like options, tags, categories, etc</p></li>
<li><p><strong>n</strong> (<em>int</em>) – How many results to return if there is no exact match</p></li>
<li><p><strong>product_type</strong> (<em>Optional</em><em>[</em><em>List</em><em>[</em><em>Text</em><em>]</em><em>]</em>) – if results should include only products of a certain type</p></li>
<li><p><strong>rerank</strong> (<em>bool</em>) – to rerank similar results by popularity or not</p></li>
<li><p><strong>multi_match_field_weights</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>[</em><em>Text</em><em>, </em><em>int</em><em>]</em><em>]</em>) – weight for multi match fields,
e.g., “name” -&gt; 3 will issue the query as <cite>name^3</cite>, indicating <cite>name</cite> field’s weight
is 3 times of other fields weight.</p></li>
<li><p><strong>return_only_one_if_strict_match</strong> (<em>bool</em>) – Default to False,</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of item name results</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[Text]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.ItemSearch.validate_index_name">
<code class="sig-name descname">validate_index_name</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#ngchat_cart.cart.ItemSearch.validate_index_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure that the name is a valid ElasticSearch index name.</p>
<p>This method will downcase, strip off illegal initial characters, and
replace internal illegal characters with ‘_’. If any characters are
replaced, it will log a warning.</p>
<p>If the name consists of the strings ‘..’ or ‘.’, if it exceeds 255 bytes,
or if the substitutions result in an empty string, the method will raise
an ValueError.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<em>Text</em>) – The name to be validated.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>valid ES index name</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Text</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="ngchat_cart.cart.Menu">
<em class="property">class </em><code class="sig-prename descclassname">ngchat_cart.cart.</code><code class="sig-name descname">Menu</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">currency</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">menu_items</span><span class="p">:</span> <span class="n">Dict<span class="p">[</span>str<span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">ngchat_cart.cart.MenuItem</a><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">menu_options</span><span class="p">:</span> <span class="n">Dict<span class="p">[</span>str<span class="p">, </span>Union<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.MenuOption" title="ngchat_cart.cart.MenuOption">ngchat_cart.cart.MenuOption</a><span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">ngchat_cart.cart.MenuItem</a><span class="p">]</span><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">categories</span><span class="p">:</span> <span class="n">Dict<span class="p">[</span>str<span class="p">, </span>List<span class="p">[</span>str<span class="p">]</span><span class="p">]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ngchat_cart.cart.Menu" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class for loading and organizing menus.</p>
<dl class="py attribute">
<dt id="ngchat_cart.cart.Menu.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#ngchat_cart.cart.Menu.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the store/menu</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Text</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.Menu.currency">
<code class="sig-name descname">currency</code><a class="headerlink" href="#ngchat_cart.cart.Menu.currency" title="Permalink to this definition">¶</a></dt>
<dd><p>Currency, e.g., “USD”</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Text</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.Menu.menu_items">
<code class="sig-name descname">menu_items</code><a class="headerlink" href="#ngchat_cart.cart.Menu.menu_items" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary of item name, MenuItem object pairs.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Dict[Text, <a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">MenuItem</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.Menu.menu_options">
<code class="sig-name descname">menu_options</code><a class="headerlink" href="#ngchat_cart.cart.Menu.menu_options" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary of option name, MenuOption object pairs</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Dict[Text, <a class="reference internal" href="#ngchat_cart.cart.MenuOption" title="ngchat_cart.cart.MenuOption">MenuOption</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.Menu.categories">
<code class="sig-name descname">categories</code><a class="headerlink" href="#ngchat_cart.cart.Menu.categories" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict of category name, list of items in that category</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Dict[Text, List[Text]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.Menu.item_search">
<code class="sig-name descname">item_search</code><a class="headerlink" href="#ngchat_cart.cart.Menu.item_search" title="Permalink to this definition">¶</a></dt>
<dd><p>An ElasticSearch instance for querying the menu</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#ngchat_cart.cart.ItemSearch" title="ngchat_cart.cart.ItemSearch">ItemSearch</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.Menu.specific_type">
<code class="sig-name descname">specific_type</code><a class="headerlink" href="#ngchat_cart.cart.Menu.specific_type" title="Permalink to this definition">¶</a></dt>
<dd><p>A set of specific types of MenuItem and MenuOptions</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Set[Optional[Text]]</p>
</dd>
</dl>
</dd></dl>

<p>Initialize required values.</p>
<dl class="py method">
<dt id="ngchat_cart.cart.Menu.check_typing">
<code class="sig-name descname">check_typing</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">menu</span><span class="p">:</span> <span class="n">Dict<span class="p">[</span>str<span class="p">, </span>Any<span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#ngchat_cart.cart.Menu.check_typing" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the typing of the json menu being loaded in and raise errors.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>Menu</strong> (<em>Dict</em><em>[</em><em>Text</em><em>, </em><em>Any</em><em>]</em>) – Raw menu data from a json menu file</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – When an attribute provides an incompatible data type.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.Menu.describe_category">
<code class="sig-name descname">describe_category</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">category</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#ngchat_cart.cart.Menu.describe_category" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a particular category, list the possible items.</p>
<p>This function will fuzzy match the <cite>category</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>category</strong> (<em>Text</em>) – The category that the user is interested in</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A description of the items available for that category.</dt><dd><p>Returns empty string “” if the category is not found.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Text</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.Menu.describe_menu">
<code class="sig-name descname">describe_menu</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#ngchat_cart.cart.Menu.describe_menu" title="Permalink to this definition">¶</a></dt>
<dd><p>Describe the menu in general terms, including what categories of items are available.</p>
<p>TODO: in the future, here would be a good place to mention popular or recommended items.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A readable description of the menu</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Text</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.Menu.from_json">
<em class="property">classmethod </em><code class="sig-name descname">from_json</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">menu_path</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#ngchat_cart.cart.Menu" title="ngchat_cart.cart.Menu">ngchat_cart.cart.Menu</a><a class="headerlink" href="#ngchat_cart.cart.Menu.from_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a menu from a json file into a Menu object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>menu_path</strong> (<em>Text</em>) – The file path to a json menu</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The menu loaded from the specified json path</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#ngchat_cart.cart.Menu" title="ngchat_cart.cart.Menu">Menu</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.Menu.generate_chatette">
<code class="sig-name descname">generate_chatette</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">item_output</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">'item'</span></em>, <em class="sig-param"><span class="n">options_output</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">'options'</span></em>, <em class="sig-param"><span class="n">categories_output</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">'query_topic'</span></em>, <em class="sig-param"><span class="n">indent</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">4</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#ngchat_cart.cart.Menu.generate_chatette" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate <cite>menu.chatette</cite> template with items, options and menu categories.</p>
<p><cite>menu.chatette</cite> is mostly handcrafted, so it is better write this output to <cite>menu-generated.chatette</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>item_output</strong> (<em>Optional</em><em>[</em><em>Text</em><em>]</em>) – output item entity name. Defaults to “item”.</p></li>
<li><p><strong>options_output</strong> (<em>Optional</em><em>[</em><em>Text</em><em>]</em>) – output option entity name. Defaults to “options”.</p></li>
<li><p><strong>categories_output</strong> (<em>Optional</em><em>[</em><em>Text</em><em>]</em>) – output category name. Defaults to “query_topic”.</p></li>
<li><p><strong>indent</strong> (<em>int</em><em>, </em><em>optional</em>) – number of spaces to indent. Defaults to 4.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a “n” joined string that can directly be written to <cite>menu-generated.chatette</cite></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Text</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.Menu.get_aliases_list">
<code class="sig-name descname">get_aliases_list</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>Optional<span class="p">[</span>List<span class="p">[</span>str<span class="p">]</span><span class="p">]</span><span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.Menu.get_aliases_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of list for all aliases including the item name itself.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a list of synonym lists</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>List[Optional[List[Text]]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.Menu.get_lookup_tables">
<code class="sig-name descname">get_lookup_tables</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">entity_attr_map</span><span class="p">:</span> <span class="n">Dict<span class="p">[</span>str<span class="p">, </span>List<span class="p">[</span>str<span class="p">]</span><span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; DefaultDict<span class="p">[</span>str<span class="p">, </span>List<span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.Menu.get_lookup_tables" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate entity lookup tables for entities whose values are populated from the menu.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>entity_attr_map</strong> (<em>Dict</em><em>[</em><em>Text</em><em>, </em><em>List</em><em>[</em><em>Text</em><em>]</em>) – Map entity names to menu attributes.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dict mapping entity names to lookup lists.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dict[Text, List[Text]]</p>
</dd>
</dl>
<p>We may also want to refine the substitutions done here, and/or allow for some kind of query expansion
to include multiple variations.</p>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.Menu.get_matching_menu_category">
<code class="sig-name descname">get_matching_menu_category</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">category</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.Menu.get_matching_menu_category" title="Permalink to this definition">¶</a></dt>
<dd><p>Given the name of a category, return the name of the closest cat. on the menu.</p>
<p>Used to verify that a category is in the menu from actions.py.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>category</strong> (<em>Text</em>) – The name of the category to be matched</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The name of the closest category match, or None if there is no confident match</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Optional[Text]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.Menu.get_matching_menu_item">
<code class="sig-name descname">get_matching_menu_item</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">item</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">ngchat_cart.cart.MenuItem</a><span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">ngchat_cart.cart.CartItem</a><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">keywords</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">[]</span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">ngchat_cart.cart.MenuItem</a><span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.Menu.get_matching_menu_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Given the name of an item, return the name of the closest item on the menu.</p>
<p>Used to verify that an item is in the menu from actions.py.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>item</strong> (<em>Union</em><em>[</em><em>Text</em><em>, </em><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem"><em>MenuItem</em></a><em>, </em><a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem"><em>CartItem</em></a><em>]</em>) – The name of the item to be matched</p></li>
<li><p><strong>keywords</strong> (<em>List</em><em>[</em><em>Text</em><em>]</em>) – other information provided by the user that can be provided
as keywords to the ES query.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The name of the closest item match, or None if there is no confident match</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Optional[<a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">MenuItem</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.Menu.get_matching_modifier_group">
<code class="sig-name descname">get_matching_modifier_group</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">type_name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">item</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">ngchat_cart.cart.CartItem</a><span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">ngchat_cart.cart.MenuItem</a><span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.MenuModifierGroup" title="ngchat_cart.cart.MenuModifierGroup">ngchat_cart.cart.MenuModifierGroup</a><span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.Menu.get_matching_modifier_group" title="Permalink to this definition">¶</a></dt>
<dd><p>Given the name of a modifier type, return the name of the closest modifier group on the menu.</p>
<p>Used to verify that a modifier group is in the menu from actions.py.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>type_name</strong> (<em>Text</em>) – The name of the modifier type to be matched</p></li>
<li><p><strong>item</strong> (<em>Union</em><em>[</em><em>Text</em><em>, </em><a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem"><em>CartItem</em></a><em>, </em><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem"><em>MenuItem</em></a><em>]</em>) – item whose modifier types to search</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>The name of the closest matching menu modifier group,</dt><dd><p>or None if there is no confident match</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Optional[Text]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.Menu.get_similar_menu_items">
<code class="sig-name descname">get_similar_menu_items</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">item</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">ngchat_cart.cart.MenuItem</a><span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem">ngchat_cart.cart.CartItem</a><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">keywords</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">max_results</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">5</span></em>, <em class="sig-param"><span class="n">multi_match_field_weights</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Dict<span class="p">[</span>str<span class="p">, </span>int<span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.Menu.get_similar_menu_items" title="Permalink to this definition">¶</a></dt>
<dd><p>Given the name of an item, return a list of the closest item names on the menu.</p>
<p>Will return a list of item names up to max_results. Will only return results with a
confidence higher than CONFIG.FUZZY_SUGGEST_THRESHOLD.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>item</strong> (<em>Union</em><em>[</em><em>Text</em><em>, </em><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem"><em>MenuItem</em></a><em>, </em><a class="reference internal" href="#ngchat_cart.cart.CartItem" title="ngchat_cart.cart.CartItem"><em>CartItem</em></a><em>]</em>) – The name of the item to find similar items to</p></li>
<li><p><strong>keywords</strong> (<em>List</em><em>[</em><em>Text</em><em>]</em>) – A list of keywords that are used in multi match</p></li>
<li><p><strong>max_results</strong> (<em>int</em>) – The number of results to return at most</p></li>
<li><p><strong>multi_match_field_weights</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>[</em><em>Text</em><em>, </em><em>int</em><em>]</em><em>]</em>) – weight for multi match fields,
e.g., “name” -&gt; 3 will issue the query as <cite>name^3</cite>, indicating <cite>name</cite> field’s weight
is 3 times of other fields weight.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of names to return, if there are any above CONFIG.FUZZY_SUGGEST_THRESH</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[Text]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.Menu.get_specific_types">
<code class="sig-name descname">get_specific_types</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Set<span class="p">[</span>Optional<span class="p">[</span>str<span class="p">]</span><span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.Menu.get_specific_types" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all specific types in MenuItem and MenuOptions.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a set of types</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Set[Optional[Text]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.Menu.load_menu">
<em class="property">classmethod </em><code class="sig-name descname">load_menu</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">menu_path</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">''</span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.Menu" title="ngchat_cart.cart.Menu">ngchat_cart.cart.Menu</a><span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.Menu.load_menu" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a store name and a path to a directory of menus, create a Menu object.</p>
<p>Uses an lru cache to persist 128 most recent menus.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>Text</em>) – The name of a store/menu</p></li>
<li><p><strong>menu_path</strong> (<em>Text</em>) – The path to the directory of shared menus or the menu itself</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – if parameters are not passed with the proper information</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>cls object if successful, None if failure</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Optional[“Menu”]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.Menu.query_item_modifiers">
<code class="sig-name descname">query_item_modifiers</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">item_name</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">active_menu_item</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">ngchat_cart.cart.MenuItem</a><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.Menu.query_item_modifiers" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve modifiers list for the item in the item slot or active item.</p>
<p>Will first try to match item_name to a MenuItem. If unsuccessful,
will use active_menu_item.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>item_name</strong> (<em>Optional</em><em>[</em><em>Text</em><em>]</em>) – The name of an item to get modifiers for.</p></li>
<li><p><strong>active_item</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem"><em>MenuItem</em></a><em>]</em>) – The MenuItem corresponding the cart’s
current active item, if any.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>If found, a string listing available modifiers, otherwise None.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Optional[Text]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.Menu.query_item_suggestions">
<code class="sig-name descname">query_item_suggestions</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">keywords</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">n</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">6</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">ngchat_cart.cart.MenuItem</a><span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.Menu.query_item_suggestions" title="Permalink to this definition">¶</a></dt>
<dd><p>Query ElasticSearch for item suggestions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>Text</em>) – String to be used to match the item name in the query.</p></li>
<li><p><strong>Keywords</strong> (<em>List</em><em>[</em><em>Text</em><em>]</em>) – List of str to be used in the keywords field for ItemSearch.
Defaults to the empty string.</p></li>
<li><p><strong>n</strong> (<em>int</em>) – Number of suggestions to return</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of item suggestions or empty list if none are found.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">MenuItem</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.Menu.query_menu_category">
<code class="sig-name descname">query_menu_category</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">category_name</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">ngchat_cart.cart.MenuItem</a><span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.Menu.query_menu_category" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a list of items in a menu category.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>category_name</strong> (<em>Optional</em><em>[</em><em>Text</em><em>]</em>) – The name of the menu category to query or None.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The list of item objects in a menu category.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">MenuItem</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.Menu.query_modifier_description">
<code class="sig-name descname">query_modifier_description</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">item_name</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">modifier_name</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">active_menu_item</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">ngchat_cart.cart.MenuItem</a><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.Menu.query_modifier_description" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve modifier description for an item modifier.</p>
<p>Will call MenuItem.describe_modifier_group with item_name, or active_menu_item.
Will return None if item_name &amp; active_menu_item are None, or modifier_name is None.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>item_name</strong> (<em>Optional</em><em>[</em><em>Text</em><em>]</em>) – The name of the item whose modifiers to query or None.</p></li>
<li><p><strong>modifier_name</strong> (<em>Optional</em><em>[</em><em>Text</em><em>]</em>) – The modifier category to query or None.</p></li>
<li><p><strong>active_item</strong> (<em>Optional</em><em>[</em><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem"><em>MenuItem</em></a><em>]</em>) – The MenuItem corresponding the cart’s
current active item, if any.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>If found, a modifier description, otherwise None.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Optional[Text]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="ngchat_cart.cart.MenuItem">
<em class="property">class </em><code class="sig-prename descclassname">ngchat_cart.cart.</code><code class="sig-name descname">MenuItem</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">id</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span>int<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">categories</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">rec_score</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">tags</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">description</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">ingredients</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>List<span class="p">[</span>str<span class="p">]</span><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">calories</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Tuple<span class="p">[</span>int<span class="p">, </span>int<span class="p">]</span><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">price</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>float<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">image</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">modifier_groups</span><span class="p">:</span> <span class="n">List<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.MenuModifierGroup" title="ngchat_cart.cart.MenuModifierGroup">ngchat_cart.cart.MenuModifierGroup</a><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">product_type</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">subtype</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">quantity</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>int<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">aliases</span><span class="p">:</span> <span class="n">Set<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">menu</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.Menu" title="ngchat_cart.cart.Menu">ngchat_cart.cart.Menu</a><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ngchat_cart.cart.MenuItem" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class for loading and organizing item data.</p>
<p>These class objects are used to store menu data. Additionally,
each CartItem object contains an MenuItem object for reference.
MenuItem comes with a list of modifier groups, and each group has a list
of possible modifiers. A MenuItem object is created based on a json menu
with the following format:</p>
<blockquote>
<div><p>“name”: “Caffè Americano”,
“aliases”: [  # from the KFC menu</p>
<blockquote>
<div><p>“$5 fill ups”,
“5 dollar fill ups”,
“five dollar fill ups”,
“number 15”,
“number fifteen”</p>
</div></blockquote>
<p>],
“id”: “776000”,
“categories”: [</p>
<blockquote>
<div><p>“Hot Coffees”</p>
</div></blockquote>
<p>],
“type”: “item”,
“subtype”: None,
“recommendation_score”: “538000”,
“tags”: [</p>
<blockquote>
<div><p>“Hot”,
“beverages”</p>
</div></blockquote>
<p>],
“description”: “Espresso shots topped with hot water.”,
“ingredients”: [</p>
<blockquote>
<div><p>“Water”,
“Brewed Espresso”</p>
</div></blockquote>
<p>],
“calories”: [15, 15],
“price”: 2.95,
“image”: “<a class="reference external" href="https://globalassets.starbucks.com/assets/f12bc8af498d45ed92c5d6f1dac64062.jpg">https://globalassets.starbucks.com/assets/f12bc8af498d45ed92c5d6f1dac64062.jpg</a>”,
“modifier_groups”: [</p>
<blockquote>
<div><dl>
<dt>{</dt><dd><p>“name”: “size”,
“category”: “Sizes”,
“query_users_for_modifier”: true,
“minimum”: 1,
“maximum”: 1,
“modifiers”: [</p>
<blockquote>
<div><dl class="simple">
<dt>{</dt><dd><p>“name”: “Short”,
“id”: 663000,
“default”: false,
“price_change”: null,
“calorie_change”: -10</p>
</dd>
</dl>
<p>},
{</p>
<blockquote>
<div><p>“name”: “Tall”,
“id”: 663001,
“default”: false,
“price_change”: null,
“calorie_change”: -5</p>
</div></blockquote>
<p>}</p>
</div></blockquote>
<p>]</p>
</dd>
</dl>
<p>},
{</p>
<blockquote>
<div><p>“name”: “Creamer”,
“category”: “Add-ins”,
“query_user_for_modifiers”: false,
“minimum”: 0,
“maximum”: -1,
“modifiers”: [</p>
<blockquote>
<div><dl>
<dt>{</dt><dd><p>“name”: “Splash of 2% Milk”,
“id”: 663004,
“default”: false,
“price_change”: null,
“calorie_change”: null,
“variants”: [</p>
<blockquote>
<div><dl class="simple">
<dt>{</dt><dd><p>“name”: “Extra Splash of 2% Milk”,
“price_change”: null,
“calorie_change”: null</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
<p>]</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
<p>}</p>
</div></blockquote>
<p>}</p>
</div></blockquote>
<p>}</p>
</div></blockquote>
<p>Internally we maintain <cite>option_type2name</cite> (e.g., “MILK CHOICES” -&gt; [“1% Milk”, “2% Milk”])</p>
<dl class="py attribute">
<dt id="ngchat_cart.cart.MenuItem.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#ngchat_cart.cart.MenuItem.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the item</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Text</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.MenuItem.id">
<code class="sig-name descname">id</code><a class="headerlink" href="#ngchat_cart.cart.MenuItem.id" title="Permalink to this definition">¶</a></dt>
<dd><p>A unique id for the product</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Text</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.MenuItem.categories">
<code class="sig-name descname">categories</code><a class="headerlink" href="#ngchat_cart.cart.MenuItem.categories" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of categories for this item</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>List[Text]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.MenuItem.rec_score">
<code class="sig-name descname">rec_score</code><a class="headerlink" href="#ngchat_cart.cart.MenuItem.rec_score" title="Permalink to this definition">¶</a></dt>
<dd><p>A popularity/recommendation score for the item</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.MenuItem.tags">
<code class="sig-name descname">tags</code><a class="headerlink" href="#ngchat_cart.cart.MenuItem.tags" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of tags used for searching relevant items</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>List[Text]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.MenuItem.description">
<code class="sig-name descname">description</code><a class="headerlink" href="#ngchat_cart.cart.MenuItem.description" title="Permalink to this definition">¶</a></dt>
<dd><p>A description of the item from the menu</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Text</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.MenuItem.ingredients">
<code class="sig-name descname">ingredients</code><a class="headerlink" href="#ngchat_cart.cart.MenuItem.ingredients" title="Permalink to this definition">¶</a></dt>
<dd><p>Ingredients of the item from the menu</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Text</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.MenuItem.calories">
<code class="sig-name descname">calories</code><a class="headerlink" href="#ngchat_cart.cart.MenuItem.calories" title="Permalink to this definition">¶</a></dt>
<dd><p>Calories object containing the basic calories of the item w/out modifications</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#ngchat_cart.cart.Calories" title="ngchat_cart.cart.Calories">Calories</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.MenuItem.price">
<code class="sig-name descname">price</code><a class="headerlink" href="#ngchat_cart.cart.MenuItem.price" title="Permalink to this definition">¶</a></dt>
<dd><p>The basic cost of the item without modifications/add-ons</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.MenuItem.image">
<code class="sig-name descname">image</code><a class="headerlink" href="#ngchat_cart.cart.MenuItem.image" title="Permalink to this definition">¶</a></dt>
<dd><p>The image URL of the item</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Text</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.MenuItem.modifier_groups">
<code class="sig-name descname">modifier_groups</code><a class="headerlink" href="#ngchat_cart.cart.MenuItem.modifier_groups" title="Permalink to this definition">¶</a></dt>
<dd><p>A modifier group object containing possible options for item</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="#ngchat_cart.cart.MenuModifierGroup" title="ngchat_cart.cart.MenuModifierGroup">MenuModifierGroup</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.MenuItem.type">
<code class="sig-name descname">type</code><a class="headerlink" href="#ngchat_cart.cart.MenuItem.type" title="Permalink to this definition">¶</a></dt>
<dd><p>one of ‘combo’, ‘item’, ‘virtual’</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Text</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.MenuItem.subtype">
<code class="sig-name descname">subtype</code><a class="headerlink" href="#ngchat_cart.cart.MenuItem.subtype" title="Permalink to this definition">¶</a></dt>
<dd><p>None or more specific types, such as “sides”, “beverages”</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[Text]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.MenuItem.menu">
<code class="sig-name descname">menu</code><a class="headerlink" href="#ngchat_cart.cart.MenuItem.menu" title="Permalink to this definition">¶</a></dt>
<dd><p>a reference to the menu this item belongs to</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#ngchat_cart.cart.Menu" title="ngchat_cart.cart.Menu">Menu</a></p>
</dd>
</dl>
</dd></dl>

<p>Initialize MenuItem attributes.</p>
<dl class="py method">
<dt id="ngchat_cart.cart.MenuItem.apply_item_overrides">
<code class="sig-name descname">apply_item_overrides</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">item_details</span><span class="p">:</span> <span class="n">Dict<span class="p">[</span>str<span class="p">, </span>Any<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">is_variant</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#ngchat_cart.cart.MenuItem.apply_item_overrides" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply item specific information to a MenuOption object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>item_details</strong> (<em>Dict</em><em>[</em><em>Text</em><em>, </em><em>Any</em><em>]</em>) – A dict of information about how the
option changes when it is applied to a specific item.</p></li>
<li><p><strong>is_variant</strong> (<em>bool</em>) – whether or not the override is a variant (will override name)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.MenuItem.check_typing">
<code class="sig-name descname">check_typing</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">data</span><span class="p">:</span> <span class="n">Dict<span class="p">[</span>str<span class="p">, </span>Any<span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#ngchat_cart.cart.MenuItem.check_typing" title="Permalink to this definition">¶</a></dt>
<dd><p>Check typing of all incoming data loaded from the menu.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>Text</em>) – The name of the item</p></li>
<li><p><strong>data</strong> (<em>Dict</em><em>[</em><em>Text</em><em>, </em><em>Any</em><em>]</em>) – The item data directly from the menu</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.MenuItem.describe_modifier_group">
<code class="sig-name descname">describe_modifier_group</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mod_group_name</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.MenuItem.describe_modifier_group" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a string that describes all the modifiers in a modifier group.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mod_group_name</strong> (<em>Text</em>) – The name of the modifier group to describe.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A string listing the possible options for a specified</dt><dd><p>option type or None if option isn’t found</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Optional[Text]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.MenuItem.from_data">
<em class="property">classmethod </em><code class="sig-name descname">from_data</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">data</span><span class="p">:</span> <span class="n">Dict<span class="p">[</span>str<span class="p">, </span>Any<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">options</span><span class="p">:</span> <span class="n">Dict<span class="p">[</span>str<span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.MenuOption" title="ngchat_cart.cart.MenuOption">ngchat_cart.cart.MenuOption</a><span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">ngchat_cart.cart.MenuItem</a><span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.MenuItem.from_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Restructure a dict of item info from json as an MenuItem.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>Text</em>) – the name of the item</p></li>
<li><p><strong>data</strong> (<em>Dict</em><em>[</em><em>Text</em><em>, </em><em>Any</em><em>]</em>) – The data for one item from a menu</p></li>
<li><p><strong>options</strong> (<em>Dict</em><em>[</em><em>Text</em><em>, </em><a class="reference internal" href="#ngchat_cart.cart.MenuOption" title="ngchat_cart.cart.MenuOption"><em>MenuOption</em></a><em>]</em>) – menu.menu_options used for creating modifier_group object</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A filled MenuItem object, or None</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">MenuItem</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.MenuItem.get_matching_item_modifiers">
<code class="sig-name descname">get_matching_item_modifiers</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mod_name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">mod_type</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>Union<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.MenuOption" title="ngchat_cart.cart.MenuOption">ngchat_cart.cart.MenuOption</a><span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">ngchat_cart.cart.MenuItem</a><span class="p">]</span><span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.MenuItem.get_matching_item_modifiers" title="Permalink to this definition">¶</a></dt>
<dd><p>Given the name of a modifier, return the name of the closest modifier available.</p>
<p>Used to verify that a modifier is available for an item from actions.py.
e.g., mod_name=1%, mod_type=milk;  mod_name=small, mod_type=size.
“modifiers” can be either MenuOptions or another MenuItem. Return just
the name of the modifier.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mod_name</strong> (<em>Text</em>) – The name of the modifier to be matched</p></li>
<li><p><strong>mod_type</strong> (<em>Optional</em><em>[</em><em>Text</em><em>]</em>) – Optional, if you want to specify a particular modifier type</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of matching modifier objects</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="#ngchat_cart.cart.MenuOption" title="ngchat_cart.cart.MenuOption">MenuOption</a>, <a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">MenuItem</a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.MenuItem.get_matching_modifier_group">
<code class="sig-name descname">get_matching_modifier_group</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">group_name</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.MenuModifierGroup" title="ngchat_cart.cart.MenuModifierGroup">ngchat_cart.cart.MenuModifierGroup</a><span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.MenuItem.get_matching_modifier_group" title="Permalink to this definition">¶</a></dt>
<dd><p>Check for a modifier group matching the passed group name.</p>
<p>Used to verify that a modifier group is in the menu from actions.py.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>type_name</strong> (<em>Text</em>) – The name of the modifier group</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The matching modifier group</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Optional[<a class="reference internal" href="#ngchat_cart.cart.MenuModifierGroup" title="ngchat_cart.cart.MenuModifierGroup">MenuModifierGroup</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.MenuItem.get_modifier_names">
<code class="sig-name descname">get_modifier_names</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">include_variants</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.MenuItem.get_modifier_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of all the item’s possible modifiers.</p>
<p>Modifiers can be either MenuOptions or another MenuItem. Return just
the name of the modifier.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>include_variants</strong> (<em>bool</em>) – whether or not to include variant names</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of all option names in the MenuItem’s mod groups</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[Text]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.MenuItem.get_modifier_names_by_mod_group_name">
<code class="sig-name descname">get_modifier_names_by_mod_group_name</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">group_name</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.MenuItem.get_modifier_names_by_mod_group_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the names of all modifiers in a modifier group matching the input name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>group_name</strong> (<em>Text</em>) – The name of the modifier group to be matched</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of names from the a matching modifier group</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[Text]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.MenuItem.get_modifier_objects">
<code class="sig-name descname">get_modifier_objects</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">modifier_type</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">include_variants</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>Union<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.MenuOption" title="ngchat_cart.cart.MenuOption">ngchat_cart.cart.MenuOption</a><span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">ngchat_cart.cart.MenuItem</a><span class="p">]</span><span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.MenuItem.get_modifier_objects" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all modifier objects, optionally filtered by type</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>modifier_type</strong> (<em>Optional</em><em>[</em><em>Text</em><em>]</em>) – The name of the modifier type (size, topping, etc).
if modifier_type is not specified, all modifier objects for the item will be returned.</p></li>
<li><p><strong>include_variants</strong> (<em>bool</em>) – Whether to include variants.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of MenuOption and/or MenuItem objects</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[Union[<a class="reference internal" href="#ngchat_cart.cart.MenuOption" title="ngchat_cart.cart.MenuOption">MenuOption</a>, <a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">MenuItem</a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.MenuItem.get_similar_item_modifiers">
<code class="sig-name descname">get_similar_item_modifiers</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">modifier_name</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>Union<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.MenuOption" title="ngchat_cart.cart.MenuOption">ngchat_cart.cart.MenuOption</a><span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">ngchat_cart.cart.MenuItem</a><span class="p">]</span><span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.MenuItem.get_similar_item_modifiers" title="Permalink to this definition">¶</a></dt>
<dd><p>Given the name of a modifier, return a list of similar item modifiers.</p>
<p>Used to give modifier recommendations for an item from actions.py.
“modifiers” can be either MenuOptions or another MenuItem.
All modifiers with a sim score &gt; FUZZY_SUGGEST_THRESH will be returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>modifier_name</strong> (<em>Text</em>) – The name of the modifier to be matched</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of similar modifier objects</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="#ngchat_cart.cart.MenuOption" title="ngchat_cart.cart.MenuOption">MenuOption</a>, <a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">MenuItem</a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.MenuItem.get_similarity_score">
<code class="sig-name descname">get_similarity_score</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">treat_overlap_as_full_match</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; float<a class="headerlink" href="#ngchat_cart.cart.MenuItem.get_similarity_score" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a similarity score in [0, 1] between <cite>name</cite> and this item’s name/aliases.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<em>Text</em>) – a text name</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a similarity score in [0, 1]</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.MenuItem.get_specific_type">
<code class="sig-name descname">get_specific_type</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.MenuItem.get_specific_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Return subtype if it’s not None otherwise type.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>None or type specified in <cite>type</cite> or <cite>subtype</cite>.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Optional[Text]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.MenuItem.set_mod_groups">
<code class="sig-name descname">set_mod_groups</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span><span class="p">:</span> <span class="n">Dict<span class="p">[</span>str<span class="p">, </span>Any<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">options</span><span class="p">:</span> <span class="n">Dict<span class="p">[</span>str<span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.MenuOption" title="ngchat_cart.cart.MenuOption">ngchat_cart.cart.MenuOption</a><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">items</span><span class="p">:</span> <span class="n">List<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">MenuItem</a><span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#ngchat_cart.cart.MenuItem.set_mod_groups" title="Permalink to this definition">¶</a></dt>
<dd><p>Finish initialization of modifier_groups.</p>
<p>Because modifier_groups can include references to items, we have to wait
until the items list is initialized before going back and calling this
method on each instance to set the modifier_groups.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>Dict</em><em>[</em><em>Text</em><em>, </em><em>Any</em><em>]</em>) – modifier group data from the menu</p></li>
<li><p><strong>options</strong> (<em>Dict</em><em>[</em><em>Text</em><em>, </em><a class="reference internal" href="#ngchat_cart.cart.MenuOption" title="ngchat_cart.cart.MenuOption"><em>MenuOption</em></a><em>]</em>) – Menu.menu_options</p></li>
<li><p><strong>items</strong> (<em>List</em><em>[</em><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem"><em>MenuItem</em></a><em>]</em>) – A list of MenuItems</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.MenuItem.sum_calories">
<code class="sig-name descname">sum_calories</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#ngchat_cart.cart.Calories" title="ngchat_cart.cart.Calories">ngchat_cart.cart.Calories</a><a class="headerlink" href="#ngchat_cart.cart.MenuItem.sum_calories" title="Permalink to this definition">¶</a></dt>
<dd><p>Return total calories of this MenuItem.</p>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.MenuItem.sum_price">
<code class="sig-name descname">sum_price</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; float<a class="headerlink" href="#ngchat_cart.cart.MenuItem.sum_price" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the total price of this MenuItem.</p>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.MenuItem.validate_modifiers">
<code class="sig-name descname">validate_modifiers</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">modifier_names</span></em><span class="sig-paren">)</span> &#x2192; Tuple<span class="p">[</span>List<span class="p">[</span>str<span class="p">]</span><span class="p">, </span>List<span class="p">[</span>str<span class="p">]</span><span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.MenuItem.validate_modifiers" title="Permalink to this definition">¶</a></dt>
<dd><p>Given modifier names, return lists of valid and invalid names.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>modifier_names</strong> (<em>List</em><em>[</em><em>Text</em><em>]</em>) – The names of requested modifiers
ie, the ‘options’ slot from the bot</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A tuple with a list of valid modifier names.</dt><dd><p>and a list of invalid modifier names.
Valid modifier names must pass FUZZY_MATCH_THRESH and
are normalized to what is on the menu.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Tuple[List[Text]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.MenuItem.validate_size">
<code class="sig-name descname">validate_size</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">requested_size</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.MenuItem.validate_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the requested size is valid with the current item.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>requested_size</strong> (<em>Text</em>) – The size name directly from user utterance</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>The normalized name of the matching size, or none</dt><dd><p>if there is no matching size.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Optional[Text]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="ngchat_cart.cart.MenuModifierGroup">
<em class="property">class </em><code class="sig-prename descclassname">ngchat_cart.cart.</code><code class="sig-name descname">MenuModifierGroup</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">category</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">query_users_for_modifier</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>bool<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">minimum</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">maximum</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">modifiers</span><span class="p">:</span> <span class="n">List<span class="p">[</span>Union<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.MenuOption" title="ngchat_cart.cart.MenuOption">ngchat_cart.cart.MenuOption</a><span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">MenuItem</a><span class="p">]</span><span class="p">]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ngchat_cart.cart.MenuModifierGroup" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class to store MenuOption and MenuItem modifiers in meaningful groups.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>Text</em>) – Modifier group name such as “Select a Size”, “Creamer”, “Powders”</p></li>
<li><p><strong>category</strong> (<em>Optional</em><em>[</em><em>Text</em><em>]</em>) – Category of this modifier, by default intialized to be the same as <cite>name</cite>.</p></li>
<li><p><strong>query_users_for_modifier</strong> (<em>Optional</em><em>[</em><em>bool</em><em>]</em>) – explicitely ask users to choose if set True</p></li>
<li><p><strong>minimum</strong> (<em>int</em>) – required minimum</p></li>
<li><p><strong>maximum</strong> (<em>int</em>) – required maximum, if -1, no maximum</p></li>
<li><p><strong>modifiers</strong> (<em>List</em><em>[</em><em>Dict</em><em>[</em><em>Text</em><em>, </em><em>Any</em><em>]</em><em>]</em>) – a list of modifiers</p></li>
</ul>
</dd>
</dl>
<p>Initialize modifier group object.</p>
<dl class="py method">
<dt id="ngchat_cart.cart.MenuModifierGroup.check_typing">
<code class="sig-name descname">check_typing</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">group</span><span class="p">:</span> <span class="n">Dict<span class="p">[</span>str<span class="p">, </span>Any<span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#ngchat_cart.cart.MenuModifierGroup.check_typing" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the typing of incoming group data and raise errors if incompatible.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>group</strong> (<em>Dict</em><em>[</em><em>Text</em><em>, </em><em>Any</em><em>]</em>) – The group data from the menu</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.MenuModifierGroup.from_data">
<em class="property">classmethod </em><code class="sig-name descname">from_data</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">group</span><span class="p">:</span> <span class="n">Dict<span class="p">[</span>str<span class="p">, </span>Any<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">options</span><span class="p">:</span> <span class="n">Dict<span class="p">[</span>str<span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.MenuOption" title="ngchat_cart.cart.MenuOption">ngchat_cart.cart.MenuOption</a><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">items</span><span class="p">:</span> <span class="n">List<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">MenuItem</a><span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#ngchat_cart.cart.MenuModifierGroup" title="ngchat_cart.cart.MenuModifierGroup">ngchat_cart.cart.MenuModifierGroup</a><a class="headerlink" href="#ngchat_cart.cart.MenuModifierGroup.from_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Create modifier group object from menu data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>group</strong> (<em>Dict</em><em>[</em><em>Text</em><em>, </em><em>Any</em><em>]</em>) – Group information from the json menu</p></li>
<li><p><strong>options</strong> (<em>Dict</em><em>[</em><em>Text</em><em>, </em><a class="reference internal" href="#ngchat_cart.cart.MenuOption" title="ngchat_cart.cart.MenuOption"><em>MenuOption</em></a><em>]</em>) – Menu.menu_options</p></li>
<li><p><strong>items</strong> (<em>List</em><em>[</em><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem"><em>MenuItem</em></a><em>]</em>) – The full list of MenuItems on the menu</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.MenuModifierGroup.get_modifier_names">
<code class="sig-name descname">get_modifier_names</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">include_variants</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.MenuModifierGroup.get_modifier_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the names of all possible options in this group.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>include_variants</strong> (<em>bool</em>) – If the result should include variant names or not</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of option names in the modifier group</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[Text]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.MenuModifierGroup.get_modifiers">
<code class="sig-name descname">get_modifiers</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">include_variants</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>Union<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.MenuOption" title="ngchat_cart.cart.MenuOption">ngchat_cart.cart.MenuOption</a><span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">ngchat_cart.cart.MenuItem</a><span class="p">]</span><span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.MenuModifierGroup.get_modifiers" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the names of all possible options in this group.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>include_variants</strong> (<em>bool</em>) – If the result should include variant names or not</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of option names in the modifier group</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[Text]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.MenuModifierGroup.is_optional">
<code class="sig-name descname">is_optional</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; bool<a class="headerlink" href="#ngchat_cart.cart.MenuModifierGroup.is_optional" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine whether this modifier group is optional.</p>
<p>This is determined by judging whether <cite>minimum == 0</cite>.
Note that if <cite>query_users_for_modifiers == True</cite>, even if this modifier group is optional,
we still need to query users for this option. For instance, in KFC menu, “would you like to
remove any condiments for a chicken sandwich”: 1. No Mayo 2. No Pickle. This is optional but we still ask.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True or False.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.MenuModifierGroup.prepend_dummy_modifier">
<code class="sig-name descname">prepend_dummy_modifier</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">prevent_duplicates</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#ngchat_cart.cart.MenuModifierGroup.prepend_dummy_modifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepend a dummy modifier to the front of modifier list.</p>
<p>Why prepend to <em>front</em>: so that this option is shown first.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="ngchat_cart.cart.MenuOption">
<em class="property">class </em><code class="sig-prename descclassname">ngchat_cart.cart.</code><code class="sig-name descname">MenuOption</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">aliases</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">tags</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">id</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span>int<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">recommendation_score</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">countable</span><span class="p">:</span> <span class="n">bool</span></em>, <em class="sig-param"><span class="n">quantity</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>int<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">unit_of_measure</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">price</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>float<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">calories</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Tuple<span class="p">[</span>int<span class="p">, </span>int<span class="p">]</span><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">description</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">image</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">variants</span><span class="p">:</span> <span class="n">List<span class="p">[</span>Union<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.MenuOption" title="ngchat_cart.cart.MenuOption">MenuOption</a><span class="p">, </span><a class="reference internal" href="#ngchat_cart.cart.MenuItem" title="ngchat_cart.cart.MenuItem">MenuItem</a><span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">variant_data</span><span class="p">:</span> <span class="n">Dict<span class="p">[</span>str<span class="p">, </span>Any<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">{}</span></em>, <em class="sig-param"><span class="n">variant_parent</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.MenuOption" title="ngchat_cart.cart.MenuOption">ngchat_cart.cart.MenuOption</a><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">product_type</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'option'</span></em>, <em class="sig-param"><span class="n">subtype</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">default</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">negative</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">menu</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.Menu" title="ngchat_cart.cart.Menu">ngchat_cart.cart.Menu</a><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ngchat_cart.cart.MenuOption" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class for immutable menu options.</p>
<p>MenuOption objects represent exactly what is on the menu. They are immutable.
When an option is selected by a user, it is converted to a mutable CartOption.</p>
<dl class="py attribute">
<dt id="ngchat_cart.cart.MenuOption.name">
<code class="sig-name descname">name</code><a class="headerlink" href="#ngchat_cart.cart.MenuOption.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the options (ex/ whipped cream)</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Text</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.MenuOption.aliases">
<code class="sig-name descname">aliases</code><a class="headerlink" href="#ngchat_cart.cart.MenuOption.aliases" title="Permalink to this definition">¶</a></dt>
<dd><p>a list of name aliases to assist with option matching</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>List[Text]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.MenuOption.tags">
<code class="sig-name descname">tags</code><a class="headerlink" href="#ngchat_cart.cart.MenuOption.tags" title="Permalink to this definition">¶</a></dt>
<dd><p>a list of words associated with the option, tags, labels</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>List[Text]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.MenuOption.id">
<code class="sig-name descname">id</code><a class="headerlink" href="#ngchat_cart.cart.MenuOption.id" title="Permalink to this definition">¶</a></dt>
<dd><p>The unique id for the modifier</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Text</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.MenuOption.recommendation_score">
<code class="sig-name descname">recommendation_score</code><a class="headerlink" href="#ngchat_cart.cart.MenuOption.recommendation_score" title="Permalink to this definition">¶</a></dt>
<dd><p>a score to rank suggestions</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.MenuOption.default">
<code class="sig-name descname">default</code><a class="headerlink" href="#ngchat_cart.cart.MenuOption.default" title="Permalink to this definition">¶</a></dt>
<dd><p>whether the option comes with an item by default or not</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.MenuOption.countable">
<code class="sig-name descname">countable</code><a class="headerlink" href="#ngchat_cart.cart.MenuOption.countable" title="Permalink to this definition">¶</a></dt>
<dd><p>whether the object is countable or not</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.MenuOption.quantity">
<code class="sig-name descname">quantity</code><a class="headerlink" href="#ngchat_cart.cart.MenuOption.quantity" title="Permalink to this definition">¶</a></dt>
<dd><p>A default quantity for the item</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.MenuOption.unit_of_measure">
<code class="sig-name descname">unit_of_measure</code><a class="headerlink" href="#ngchat_cart.cart.MenuOption.unit_of_measure" title="Permalink to this definition">¶</a></dt>
<dd><p>Unit of measure (shots, pumps, etc)</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[Text]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.MenuOption.price">
<code class="sig-name descname">price</code><a class="headerlink" href="#ngchat_cart.cart.MenuOption.price" title="Permalink to this definition">¶</a></dt>
<dd><p>Price increase caused by adding this option to the item</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.MenuOption.calories">
<code class="sig-name descname">calories</code><a class="headerlink" href="#ngchat_cart.cart.MenuOption.calories" title="Permalink to this definition">¶</a></dt>
<dd><p>Calories object containing number of calories this option adds to the item</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#ngchat_cart.cart.Calories" title="ngchat_cart.cart.Calories">Calories</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.MenuOption.description">
<code class="sig-name descname">description</code><a class="headerlink" href="#ngchat_cart.cart.MenuOption.description" title="Permalink to this definition">¶</a></dt>
<dd><p>description, if there is one</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[Text]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.MenuOption.image">
<code class="sig-name descname">image</code><a class="headerlink" href="#ngchat_cart.cart.MenuOption.image" title="Permalink to this definition">¶</a></dt>
<dd><p>url to image if there is one</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[Text]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.MenuOption.product_type">
<code class="sig-name descname">product_type</code><a class="headerlink" href="#ngchat_cart.cart.MenuOption.product_type" title="Permalink to this definition">¶</a></dt>
<dd><p>The type for the modifier, usually it’s “option”</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Text</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.MenuOption.subtype">
<code class="sig-name descname">subtype</code><a class="headerlink" href="#ngchat_cart.cart.MenuOption.subtype" title="Permalink to this definition">¶</a></dt>
<dd><p>The subtype for the modifier, examples: None, “beverages”, “sauces”</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Optional[Text]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.MenuOption.negative">
<code class="sig-name descname">negative</code><a class="headerlink" href="#ngchat_cart.cart.MenuOption.negative" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether the option is negative, e.g. “No Onions”.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.MenuOption.variants">
<code class="sig-name descname">variants</code><a class="headerlink" href="#ngchat_cart.cart.MenuOption.variants" title="Permalink to this definition">¶</a></dt>
<dd><p>possible variants with the values ‘name’, ‘price’, ‘calories’</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="#ngchat_cart.cart.MenuOption" title="ngchat_cart.cart.MenuOption">MenuOption</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.MenuOption.variant_parent">
<code class="sig-name descname">variant_parent</code><a class="headerlink" href="#ngchat_cart.cart.MenuOption.variant_parent" title="Permalink to this definition">¶</a></dt>
<dd><p>(Optional[MenuOption]): if this MenuOption itself is a variant, this is its parent</p>
</dd></dl>

<dl class="py attribute">
<dt id="ngchat_cart.cart.MenuOption.menu">
<code class="sig-name descname">menu</code><a class="headerlink" href="#ngchat_cart.cart.MenuOption.menu" title="Permalink to this definition">¶</a></dt>
<dd><p>a reference to the menu this option belongs to</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#ngchat_cart.cart.Menu" title="ngchat_cart.cart.Menu">Menu</a></p>
</dd>
</dl>
</dd></dl>

<p>Initialize option attributes.</p>
<dl class="py method">
<dt id="ngchat_cart.cart.MenuOption.apply_item_overrides">
<code class="sig-name descname">apply_item_overrides</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">item_details</span><span class="p">:</span> <span class="n">Dict<span class="p">[</span>str<span class="p">, </span>Any<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">is_variant</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#ngchat_cart.cart.MenuOption.apply_item_overrides" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply item specific information to a MenuOption object.</p>
<p>The MenuOption object starts out with the data from Modifiers section of the menu.
For MenuOption objects that belong to a specific item, the values such as price,
calories, etc, may be slightly different. Override the default values to match
the item-specific values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>item_details</strong> (<em>Dict</em><em>[</em><em>Text</em><em>, </em><em>Any</em><em>]</em>) – A dict of information about how the
option changes when it is applied to a specific item.
This is the dict in an items modifier_group.modifier list in the menu.</p></li>
<li><p><strong>is_variant</strong> (<em>bool</em>) – whether the override is variant or not (this will include overriding the name)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.MenuOption.from_data">
<em class="property">classmethod </em><code class="sig-name descname">from_data</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">data</span><span class="p">:</span> <span class="n">Dict<span class="p">[</span>str<span class="p">, </span>Any<span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#ngchat_cart.cart.MenuOption" title="ngchat_cart.cart.MenuOption">ngchat_cart.cart.MenuOption</a><a class="headerlink" href="#ngchat_cart.cart.MenuOption.from_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an MenuOption class from menu data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>Text</em>) – The name of the option</p></li>
<li><p><strong>data</strong> (<em>Dict</em><em>[</em><em>Text</em><em>, </em><em>Text</em><em>]</em>) – A dictionary containing info about the option from the menu</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – for any values that are of an invalid type</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>An object containing the passed-in data</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#ngchat_cart.cart.MenuOption" title="ngchat_cart.cart.MenuOption">MenuOption</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.MenuOption.get_covariant_names">
<code class="sig-name descname">get_covariant_names</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.MenuOption.get_covariant_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a list of names of MenuOptions in the same variant group.</p>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.MenuOption.get_covariants">
<code class="sig-name descname">get_covariants</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span><a class="reference internal" href="#ngchat_cart.cart.MenuOption" title="ngchat_cart.cart.MenuOption">ngchat_cart.cart.MenuOption</a><span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.MenuOption.get_covariants" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a list of MenuOptions in the same variant group.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of covariants</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>List[<a class="reference internal" href="#ngchat_cart.cart.MenuOption" title="ngchat_cart.cart.MenuOption">MenuOption</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.MenuOption.get_similarity_score">
<code class="sig-name descname">get_similarity_score</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">treat_overlap_as_full_match</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; float<a class="headerlink" href="#ngchat_cart.cart.MenuOption.get_similarity_score" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a similarity score in [0, 1] between <cite>name</cite> and the best match in this option’s name/aliases.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>Text</em>) – a text name, usually provided by the user</p></li>
<li><p><strong>treat_overlap_as_full_match</strong> (<em>bool</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a similarity score in [0, 1]</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.MenuOption.get_specific_type">
<code class="sig-name descname">get_specific_type</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.MenuOption.get_specific_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Return subtype if it’s not None otherwise type.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>None or type specified in <cite>type</cite> or <cite>subtype</cite>.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Optional[Text]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.MenuOption.sum_calories">
<code class="sig-name descname">sum_calories</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#ngchat_cart.cart.Calories" title="ngchat_cart.cart.Calories">ngchat_cart.cart.Calories</a><a class="headerlink" href="#ngchat_cart.cart.MenuOption.sum_calories" title="Permalink to this definition">¶</a></dt>
<dd><p>Sum and return Calories object.</p>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.MenuOption.sum_price">
<code class="sig-name descname">sum_price</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; float<a class="headerlink" href="#ngchat_cart.cart.MenuOption.sum_price" title="Permalink to this definition">¶</a></dt>
<dd><p>Sum and return price as a float.</p>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.MenuOption.to_variant">
<code class="sig-name descname">to_variant</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">variant_detail</span><span class="p">:</span> <span class="n">Dict<span class="p">[</span>str<span class="p">, </span>Any<span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#ngchat_cart.cart.MenuOption" title="ngchat_cart.cart.MenuOption">ngchat_cart.cart.MenuOption</a><a class="headerlink" href="#ngchat_cart.cart.MenuOption.to_variant" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new variant based on this MenuOption.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="ngchat_cart.cart.MenuSolver">
<em class="property">class </em><code class="sig-prename descclassname">ngchat_cart.cart.</code><code class="sig-name descname">MenuSolver</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">items</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">option2items</span><span class="p">:</span> <span class="n">Dict<span class="p">[</span>str<span class="p">, </span>Set<span class="p">[</span>str<span class="p">]</span><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">item2weight</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Dict<span class="p">[</span>str<span class="p">, </span>int<span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">default_weight</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">100</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ngchat_cart.cart.MenuSolver" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A combinatory solver for MenuItem that tries to give the best recommendations of MenuItem’s given a list of options.</p>
<p>Suppose we have the following options:</p>
<p>“I’d like a number 3 with pepsi, extra crispy and dip it in honey bbq sauce”
1: item: number 3
2: dipping_sauces: honey bbq sauce
3: beverage: pepsi
4: option: extra crispy</p>
<p>Note from the menu “number 3” doesn’t come with “honey bbq sauce”, it’s a separate “dipping sauce” item</p>
<p>We have the following candidate items:
a: 3pc chicken combo
b: 3pc tenders combo
c: honey bbq sauce
d: crispy colonel box</p>
<p>Desired result: a (alias to “number 3”) + c.</p>
<p>The following is the matching matrix:</p>
<blockquote>
<div><p>1  2  3  4</p>
</div></blockquote>
<p>a  1  0  1  1
b  0  0  1  1
c  0  1  0  0
d  0  1  0  0</p>
<p>All variables are boolean here.
We need to solve for the least number of items:</p>
<blockquote>
<div><p>min(a + b + c + d)</p>
</div></blockquote>
<dl class="simple">
<dt>with the constraint that each option has one matching item:</dt><dd><p>column 1: a == 1
column 2: c + d == 1
column 3: a + b == 1
column 4: a + b == 1 (duplicate)</p>
</dd>
</dl>
<p>(Note: these constraints can be relaxed by replacing == with &gt;=: each option can
have multiple matching items.)</p>
<p>Best solutions:
solution 1. a = 1, c = 1
solution 2. a = 1, d = 1</p>
<p>The <cite>optimize()</cite> function can output either 1 or 2, but <em>not</em> both.
The <cite>find_all()</cite> function can output both.</p>
<p>In order to influence the outcome, we can introduce weight to each item:</p>
<ol class="arabic simple">
<li><p>min(a + b + 0.5 * c + d) -&gt; solution 1</p></li>
<li><p>min(a + b + c + 0.5 * d) -&gt; solution 2</p></li>
</ol>
<p>In this case we prefer solution 1 as we don’t want to have “honey bbq sauce” by
ordering a whole “crispy colonel box”.</p>
<p>The weight 0.5 here can come from:</p>
<ol class="arabic simple">
<li><p>price for each item, if we want to minimize the total cost (good for consumer)</p></li>
<li><p>similarity score between item and option</p></li>
<li><p>other weights that you desire</p></li>
</ol>
<p>Here are a few important notes about weight:
1. weight is inverse of importance: the lower the weight, the more important the item</p>
<blockquote>
<div><p>since we are minimizing the objective</p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>the CP-SAT solver we currently use only accepts integers weights, so by default all
weights are 100. If you want more important weight, assign 50, 20, etc.</p></li>
<li><p>(development) If in the future you <em>really</em> need floating weight, use the pywraplp
solver instead.</p></li>
</ol>
<p>References:
* <a class="reference external" href="https://developers.google.com/optimization/cp/cp_solver">https://developers.google.com/optimization/cp/cp_solver</a>
* <a class="reference external" href="https://google.github.io/or-tools/python/ortools/sat/python/cp_model.html">https://google.github.io/or-tools/python/ortools/sat/python/cp_model.html</a>
* <a class="reference external" href="https://google.github.io/or-tools/python/ortools/linear_solver/pywraplp.html">https://google.github.io/or-tools/python/ortools/linear_solver/pywraplp.html</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>items</strong> (<em>List</em><em>[</em><em>Text</em><em>]</em>) – a list of item names in str</p></li>
<li><p><strong>option2items</strong> (<em>Dict</em><em>[</em><em>Text</em><em>, </em><em>List</em><em>[</em><em>Text</em><em>]</em><em>]</em>) – each option and its list of matching items</p></li>
<li><p><strong>item2weight</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>[</em><em>Text</em><em>, </em><em>int</em><em>]</em><em>]</em>) – weight for each item, must be between [0, default_weight].
If an item has default weight, you don’t need to specify it: i.e., only assign the non-default weight.
However, after calling <cite>optimize()</cite>, your <cite>item2weight</cite> will be <em>chaged</em> and populated with
missing default values.</p></li>
<li><p><strong>default_weight</strong> (<em>int</em>) – default to 100</p></li>
</ul>
</dd>
</dl>
<p>As an example:</p>
<p>items: [‘3pc chicken combo’, ‘3pc tenders combo’, ‘honey bbq sauce’, ‘crispy colonel box’]
option2items: {</p>
<blockquote>
<div><p>‘number 3’: {‘3pc chicken combo’},
‘honey bbq sauce’: {“crispy colonel box”, “honey bbq sauce”},
‘pepsi’: {‘3pc chicken combo’, ‘3pc tenders combo’, ‘crispy colonel box’},
‘extra crispy’: {‘3pc chicken combo’, ‘3pc tenders combo’, ‘crispy colonel box’}
}</p>
</div></blockquote>
<p>item2weight: {‘honey bbq sauce’: 50}</p>
<p>After calling <cite>optimize()</cite>:</p>
<p>{‘3pc chicken combo’: [‘number 3’, ‘pepsi’, ‘extra crispy’],
‘honey bbq sauce’: [‘honey bbq sauce’]}</p>
<p>After calling <cite>find_all()</cite> <em>if</em> equal weight for all items:
[{‘3pc chicken combo’: [‘number 3’, ‘pepsi’, ‘extra crispy’], ‘honey bbq sauce’: [‘honey bbq sauce’]},</p>
<blockquote>
<div><dl class="simple">
<dt>{‘3pc chicken combo’: [‘number 3’, ‘pepsi’, ‘extra crispy’], ‘crispy colonel box’:</dt><dd><p>[‘honey bbq sauce’, ‘pepsi’, ‘extra crispy’]}]</p>
</dd>
</dl>
</div></blockquote>
<p>Solve a menu combinatory problem.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>items</strong> (<em>List</em><em>[</em><em>Text</em><em>]</em>) – a list of item names in str</p></li>
<li><p><strong>option2items</strong> (<em>Dict</em><em>[</em><em>Text</em><em>, </em><em>Set</em><em>[</em><em>Text</em><em>]</em><em>]</em>) – each option and its set of matching items</p></li>
<li><p><strong>item2weight</strong> (<em>Optional</em><em>[</em><em>Dict</em><em>[</em><em>Text</em><em>, </em><em>int</em><em>]</em><em>]</em>) – weight for each item, must be between [0, default_weight].
If an item has default weight, you don’t need to specify it: i.e., only assign the non-default weight.
However, after calling <cite>optimize()</cite>, your <cite>item2weight</cite> will be <em>chaged</em> and populated with
missing default values.</p></li>
<li><p><strong>default_weight</strong> (<em>int</em>) – default to 100</p></li>
</ul>
</dd>
</dl>
<dl class="py class">
<dt id="ngchat_cart.cart.MenuSolver.SolutionCallback">
<em class="property">class </em><code class="sig-name descname">SolutionCallback</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">variables</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ngchat_cart.cart.MenuSolver.SolutionCallback" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ortools.sat.python.cp_model.CpSolverSolutionCallback</span></code></p>
<p>A callback to record all viable solutions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>variables</strong> (<em>List</em><em>[</em><em>IntVar</em><em>]</em>) – a list of inner variables</p>
</dd>
</dl>
<p>Init a callback class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>variables</strong> (<em>List</em><em>[</em><em>IntVar</em><em>]</em>) – a list of inner variables</p>
</dd>
</dl>
<dl class="py method">
<dt id="ngchat_cart.cart.MenuSolver.SolutionCallback.on_solution_callback">
<code class="sig-name descname">on_solution_callback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ngchat_cart.cart.MenuSolver.SolutionCallback.on_solution_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Record all solutions.</p>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.MenuSolver.SolutionCallback.solution_count">
<code class="sig-name descname">solution_count</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; int<a class="headerlink" href="#ngchat_cart.cart.MenuSolver.SolutionCallback.solution_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Return total number of solutions</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>total count</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.MenuSolver.find_all">
<code class="sig-name descname">find_all</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">return_all</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>Dict<span class="p">[</span>str<span class="p">, </span>List<span class="p">[</span>str<span class="p">]</span><span class="p">]</span><span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.MenuSolver.find_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Find all optimal solution by minimizing the weighted sum of all items.</p>
<p>Sample return. Here both Combos match the options of ‘chicken sandwich’ and ‘pepsi’</p>
<p>[{‘Chicken Littles Combo’: [‘chicken sandwich’, ‘pepsi’]}, {‘Crispy Colonel Combo’: [‘chicken sandwich’, ‘pepsi’]}]</p>
<p>Warning:
If you call <cite>optimize()</cite> first, then you CANNOT call <cite>find_all()</cite> at all (TypeError) because optimize()
sets an objective function and makes the problem not a SAT problem any more.
If you call <cite>find_all()</cite> first, you can still call <cite>optimize()</cite>. However after that, you cannot call
<cite>find_all()</cite> again.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>TypeError</strong> – if <cite>optimize()</cite> is called before <cite>find_all()</cite>: Search for all solutions is only defined on
    satisfiability problems</p>
</dd>
<dt class="field-even">Parameters</dt>
<dd class="field-even"><p><strong>return_all</strong> (<em>bool</em>) – if yes, return all solutions rather than the ones with minimal weights. Default to False.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>a list of mapping between item name to a list of satisfying options.</dt><dd><p>Return {} if no optimal solutions.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>List[Dict[Text, List[Text]]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="ngchat_cart.cart.MenuSolver.optimize">
<code class="sig-name descname">optimize</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Dict<span class="p">[</span>str<span class="p">, </span>List<span class="p">[</span>str<span class="p">]</span><span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.MenuSolver.optimize" title="Permalink to this definition">¶</a></dt>
<dd><p>Find an optimal solution.</p>
<p>Note:
1. This function is <em>not</em> guaranteed to return an optimal solution.
2. This function only returns one optimal solution if there are multiple.
3. This funcation cannot find all <em>possible</em> solutions.</p>
<p>If you need 3, then you have a satisfiability problem, not an optimization problem.</p>
<p>Warning:
If you cal <cite>optimize()</cite> first, then you CANNOT call <cite>find_all()</cite> at all (TypeError) because optimize()
sets an objective function and makes the problem not a SAT problem any more.
If you call <cite>find_all()</cite> first, you can still call <cite>optimize()</cite>. However after that, you cannot call
<cite>find_all()</cite> again.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>a mapping between item name to a list of satisfying options.</dt><dd><p>Return {} if no optimal solutions.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Dict[Text, List[Text]]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="ngchat_cart.cart.check_type_and_cast_to_list">
<code class="sig-prename descclassname">ngchat_cart.cart.</code><code class="sig-name descname">check_type_and_cast_to_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">members</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>Any<span class="p">, </span>List<span class="p">[</span>Any<span class="p">]</span><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">members_type</span><span class="p">:</span> <span class="n">type</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>Any<span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.check_type_and_cast_to_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Cast a single item or a list to a list: item -&gt;  [item], [item] -&gt; [item].</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>members</strong> (<em>Union</em><em>[</em><em>Any</em><em>, </em><em>List</em><em>[</em><em>Any</em><em>]</em><em>]</em>) – a single item or a list</p></li>
<li><p><strong>members_type</strong> (<em>Any</em>) – item’s type, e.g., str, MenuItem, dict</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – if item doesn’t match <cite>members_type</cite></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>a list</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>List[Any]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="ngchat_cart.cart.format_calories">
<code class="sig-prename descclassname">ngchat_cart.cart.</code><code class="sig-name descname">format_calories</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">calories</span><span class="p">:</span> <span class="n">Any</span></em><span class="sig-paren">)</span> &#x2192; Optional<span class="p">[</span>Tuple<span class="p">[</span>int<span class="p">, </span>int<span class="p">]</span><span class="p">]</span><a class="headerlink" href="#ngchat_cart.cart.format_calories" title="Permalink to this definition">¶</a></dt>
<dd><p>Format calories given raw menu data.</p>
<p>Now only used for intializing Calorie objects from raw menu data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>calories</strong> (<em>Any</em>) – Calorie data directly from the menu. Expecting
a single float/int or a list with 1-2 floats/ints</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – if calorie data is not in an acceptable format</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>if the input makes sense, return</dt><dd><p>a tuple containing the calorie min/max. Otherwise None</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Optional[Tuple[int, int]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="ngchat_cart.cart.get_user_cart">
<code class="sig-prename descclassname">ngchat_cart.cart.</code><code class="sig-name descname">get_user_cart</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">sender_id</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#ngchat_cart.cart.Cart" title="ngchat_cart.cart.Cart">ngchat_cart.cart.Cart</a><a class="headerlink" href="#ngchat_cart.cart.get_user_cart" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a cart object based on sender ID.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sender_id</strong> (<em>Text</em>) – tracker.sender_id, unique id for user</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The user’s cart object (new if user doesn’t have one)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#ngchat_cart.cart.Cart" title="ngchat_cart.cart.Cart">Cart</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="ngchat_cart.cart.list_to_string">
<code class="sig-prename descclassname">ngchat_cart.cart.</code><code class="sig-name descname">list_to_string</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">to_string</span><span class="p">:</span> <span class="n">List</span></em>, <em class="sig-param"><span class="n">join</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'and'</span></em>, <em class="sig-param"><span class="n">exclude</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">[]</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#ngchat_cart.cart.list_to_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Take an iterable and return a readable list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>to_string</strong> (<em>List</em><em>[</em><em>Text</em><em>]</em>) – A list of strings</p></li>
<li><p><strong>join</strong> (<em>Text</em>) – An optional parameter that determines what the final item should be preceded by</p></li>
<li><p><strong>exclude</strong> (<em>List</em><em>[</em><em>Text</em><em>]</em>) – A list of values to exclude from the final string</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A readable list as a string</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Text</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="ngchat_cart.cart.load_config">
<code class="sig-prename descclassname">ngchat_cart.cart.</code><code class="sig-name descname">load_config</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#ngchat_cart.cart.load_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Load cart config file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>Text</em>) – path to cart config file</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="ngchat_cart.cart.load_menus">
<code class="sig-prename descclassname">ngchat_cart.cart.</code><code class="sig-name descname">load_menus</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">paths</span><span class="p">:</span> <span class="n">List<span class="p">[</span>str<span class="p">]</span></span> <span class="o">=</span> <span class="default_value">{}</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#ngchat_cart.cart.load_menus" title="Permalink to this definition">¶</a></dt>
<dd><p>Load all menus in specified to MENU global dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> (<em>List</em><em>[</em><em>Text</em><em>]</em>) – A list of menu paths to load
default=CONFIG.MENU_PATHS</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="ngchat_cart.cart.price_change_to_text">
<code class="sig-prename descclassname">ngchat_cart.cart.</code><code class="sig-name descname">price_change_to_text</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">price</span><span class="p">:</span> <span class="n">float</span></em>, <em class="sig-param"><span class="n">currency</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'USD'</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#ngchat_cart.cart.price_change_to_text" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert price change to currency-aware text with “+”/”-” to indicate change.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>price</strong> (<em>float</em>) – price number</p></li>
<li><p><strong>currency</strong> (<em>Text</em><em>, </em><em>optional</em>) – Short code for currency: USD/CAD/EUR/RMB/JPY. Defaults to “USD”.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>e.g., “+$3.10”, “-$0.30”</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Text</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="ngchat_cart.cart.price_to_text">
<code class="sig-prename descclassname">ngchat_cart.cart.</code><code class="sig-name descname">price_to_text</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">price</span><span class="p">:</span> <span class="n">float</span></em>, <em class="sig-param"><span class="n">currency</span><span class="p">:</span> <span class="n">str</span> <span class="o">=</span> <span class="default_value">'USD'</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#ngchat_cart.cart.price_to_text" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert price to currency-aware text.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>price</strong> (<em>float</em>) – price number</p></li>
<li><p><strong>currency</strong> (<em>Text</em><em>, </em><em>optional</em>) – Short code for currency: USD/CAD/EUR/RMB/JPY. Defaults to “USD”.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – if currency is not in USD/CAD/EUR/RMB/JPY.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>e.g., “$3.10”, returns “” if price is None</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Text</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="ngchat_cart.cart.safe_inflect_number">
<code class="sig-prename descclassname">ngchat_cart.cart.</code><code class="sig-name descname">safe_inflect_number</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">string</span></em>, <em class="sig-param"><span class="n">quantity</span></em><span class="sig-paren">)</span><a class="headerlink" href="#ngchat_cart.cart.safe_inflect_number" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrap the inflect method to catch exceptions.</p>
<p>Note: We should look into replacing the inflect library
with something that sucks less so we don’t need this.</p>
</dd></dl>

<dl class="py function">
<dt id="ngchat_cart.cart.similarity_score">
<code class="sig-prename descclassname">ngchat_cart.cart.</code><code class="sig-name descname">similarity_score</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">text</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">texts</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>str<span class="p">, </span>List<span class="p">[</span>str<span class="p">]</span><span class="p">]</span></span></em>, <em class="sig-param"><span class="n">treat_overlap_as_full_match</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">True</span></em><span class="sig-paren">)</span> &#x2192; float<a class="headerlink" href="#ngchat_cart.cart.similarity_score" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a similarity score in [0, 1] between <cite>text</cite> and a list of <cite>texts</cite>.</p>
<p>Given a string and a list of candidate strings, return a score between 0 and 1
for the best match in the candidate strings.
If <cite>texts</cite> is an empty list, return 0.</p>
<p>A similarity score of 1 indicates:
1. case-insensitive match: e.g., “cole slaw” and “Cole Slaw”
2. number-insensitive match: e.g., “cole slow” and “cole slaws”
3. if treat_overlap_as_full_match is True, then one text fully contains another,</p>
<blockquote>
<div><p>e.g., “number 7 big box” and “number 7”</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>text</strong> (<em>Text</em>) – a str</p></li>
<li><p><strong>texts</strong> (<em>List</em><em>[</em><em>Text</em><em>]</em>) – a list of candidate str</p></li>
<li><p><strong>treat_overlap_as_full_match</strong> (<em>bool</em>) – if True, and one text contains another, return 1.
Default to True.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a similarity score in [0, 1]</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ngchat_cart.generate_chatette">
<span id="ngchat-cart-generate-chatette-module"></span><h2>ngchat_cart.generate_chatette module<a class="headerlink" href="#module-ngchat_cart.generate_chatette" title="Permalink to this headline">¶</a></h2>
<p>Use ngchat_cart to generate a menu.chatette file from an ngchat_cart formatted menu.</p>
<dl class="field-list simple">
<dt class="field-odd">param 1</dt>
<dd class="field-odd"><p>menu file path</p>
</dd>
<dt class="field-even">param 2</dt>
<dd class="field-even"><p>output file path</p>
</dd>
</dl>
<dl class="py function">
<dt id="ngchat_cart.generate_chatette.write_menu_chatette">
<code class="sig-prename descclassname">ngchat_cart.generate_chatette.</code><code class="sig-name descname">write_menu_chatette</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">menu_fpath</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">save_fpath</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#ngchat_cart.generate_chatette.write_menu_chatette" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate menu.chatette file from an ngchat_cart formatted menu.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>menu_fpath</strong> (<em>Text</em><em>, </em><em>optional</em>) – Menu filepath.</p></li>
<li><p><strong>save_fpath</strong> (<em>Text</em><em>, </em><em>optional</em>) – Generated .chatatte file path.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-ngchat_cart.generate_lookup_tables">
<span id="ngchat-cart-generate-lookup-tables-module"></span><h2>ngchat_cart.generate_lookup_tables module<a class="headerlink" href="#module-ngchat_cart.generate_lookup_tables" title="Permalink to this headline">¶</a></h2>
<p>Use ngchat_cart to generate Rasa entity lookup tables from an ngchat_cart formatted menu.</p>
<dl class="field-list simple">
<dt class="field-odd">param 1</dt>
<dd class="field-odd"><p>menu file path</p>
</dd>
<dt class="field-even">param 2</dt>
<dd class="field-even"><p>output directory</p>
</dd>
</dl>
<dl class="py function">
<dt id="ngchat_cart.generate_lookup_tables.write_menu_chatette">
<code class="sig-prename descclassname">ngchat_cart.generate_lookup_tables.</code><code class="sig-name descname">write_menu_chatette</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">menu_fpath</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">output_dir</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">reverse_sort_by_len</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span> &#x2192; None<a class="headerlink" href="#ngchat_cart.generate_lookup_tables.write_menu_chatette" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate entity lookup tables for options, items, and query_topics.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>menu_fpath</strong> (<em>Text</em>) – Menu filepath.</p></li>
<li><p><strong>output_dir</strong> (<em>Text</em>) – Lookup table output directory.</p></li>
<li><p><strong>reverse_sort_by_len</strong> (<em>Bool</em>) – Sort output by decending length so RegexEntityExtractor matches the longest word first.
Default to True.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../nlp/readme.html" class="btn btn-neutral float-right" title="SeaWord NLP Overview" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="readme.html" class="btn btn-neutral float-left" title="SeaChat Cart Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020-2021, Seasalt.ai

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-10405841-8', 'auto');
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>